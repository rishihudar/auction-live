{"version":3,"file":"ExcelViewer-7d0d590c.js","sources":["../../src/views/masters/ExcelViewer.vue"],"sourcesContent":["<!-- src/components/ExcelViewer.vue -->\r\n<!-- <template>\r\n  <div>\r\n    <template v-if=\"flag===0\"> -->\r\n    <template>\r\n      <div class=\"card\">\r\n          <Toast />\r\n           <!-- <FileUpload\r\n                name=\"excelFile\"\r\n                url=\"http://localhost:8000/api/upload\"\r\n                label=\"Choose Excel File\"\r\n                accept=\".xlsx,\"\r\n                mode=\"basic\"\r\n                :auto=\"true\"\r\n                :custom-upload=\"true\"\r\n                @uploader=\"onChange\"\r\n              > -->\r\n          <!-- <FileUpload \r\n              name=\"userDataSheet\" \r\n              @upload=\"onAdvancedUpload($event)\" \r\n              :multiple=\"true\" \r\n              accept=\".xls,.csv,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel\" \r\n              :maxFileSize=\"1000000\">\r\n              <template #empty>\r\n                  <p>Drag and drop files to here to upload.</p>\r\n              </template>\r\n              \r\n          </FileUpload> -->\r\n\r\n\r\n          <!-- <FileUpload \r\n            v-model:files=\"userDataSheet\" \r\n            @uploader=\"onAdvancedUpload\" \r\n            multiple \r\n            accept=\".xls,.csv,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel\" \r\n            :max-file-size=\"1000000\">\r\n            <template v-slot:empty>\r\n              <p>Drag and drop files here to upload.</p>\r\n            </template>\r\n          </FileUpload> -->\r\n          <FileUpload\r\n            v-model=\"userDataSheet\"\r\n            accept=\".xlsx, .csv,\"\r\n            :multiple=\"false\"\r\n            :max-file-size=\"200000\" \r\n            :custom-upload=\"true\" \r\n            @uploader=\"onAdvancedUpload\"\r\n             \r\n          />\r\n      </div>\r\n\r\n\r\n      <div>\r\n        <DataTable :value=\"excelData\"\r\n        showGridlines\r\n        :loading=\"loading\"\r\n        >\r\n          <Column\r\n            v-for=\"field in fields\"\r\n            :key=\"field\"\r\n            :field=\"field\"\r\n            :header=\"field\"\r\n          />\r\n        </DataTable>\r\n      </div>\r\n\r\n\r\n      <div class=\"card flex justify-content-center\">\r\n        <Button label=\"Check Unadded Data\" @click=\"visible = true\" />\r\n          <Dialog v-model:visible=\"visible\" modal header=\"Edit Profile\" >\r\n              <template #header>\r\n                  <div class=\"inline-flex align-items-center justify-content-center gap-2\">\r\n                    \r\n                      <span class=\"font-bold white-space-nowrap\">Note</span>\r\n                  </div>\r\n              </template>\r\n              <span class=\"p-text-secondary block mb-5\">The Following Users are already Available</span>\r\n              <div class=\"card\">\r\n                  <DataTable :value=\"products\" tableStyle=\"min-width: 50rem\">\r\n                      <Column field=\"username\" header=\"Username\"></Column>\r\n                  </DataTable>\r\n              </div>\r\n              <span class=\"p-text-secondary block mb-5\">Please check manually, and insert the record with Different Username</span>\r\n              <template #footer>\r\n                  <Button label=\"Ok\" text severity=\"secondary\" @click=\"visible = false, $router.push({ name: 'UserManagement' })\" autofocus />              </template>\r\n          </Dialog>\r\n      </div> \r\n    </template>\r\n\r\n\r\n    <!-- <template v-else-if=\"flag === 1\">\r\n      <div class=\"card\">\r\n        <DataTable\r\n          responsiveLayout=\"scroll\"\r\n          v-model:filters=\"filters\"\r\n          :value=\"userData\"\r\n          paginator\r\n          :rows=\"10\"\r\n          :rowsPerPageOptions=\"[5, 10, 20, 50]\"\r\n          showGridlines\r\n          dataKey=\"id\" \r\n          :loading=\"loading\"\r\n          :globalFilterFields=\"['fullName', 'districtName', 'PASSWORD', 'mobile', 'email', 'loginEmail', 'entityName', 'entityType', 'departmentId', 'cadreId', 'designationId']\"\r\n        >\r\n          <template #header>\r\n            <div class=\"flex justify-content-between\">\r\n              <div class=\"mr-auto\">\r\n                <span class=\"p-input-icon-left\">\r\n                  <i class=\"pi pi-search\" />\r\n                  <InputText v-model=\"filters['global'].value\" placeholder=\"Keyword Search\" />\r\n                </span>\r\n              </div>\r\n\r\n              <div class=\"flex flex-wrap align-items-center justify-content-center\">\r\n                <span class=\"flex align-items-center\">\r\n                  <h1 class=\"mr-2\">Users</h1>\r\n                </span>\r\n              </div>\r\n\r\n              <div class=\"ml-auto\">\r\n                <span class=\"p-buttonset\">\r\n                  <Button @click=\"changeFlag(0)\" label=\"Add through Excel\" icon=\"pi pi-trash\" />\r\n                </span>\r\n              </div>\r\n\r\n              <div class=\"ml-auto\">\r\n                <span class=\"p-buttonset\">\r\n                  <Button @click=\"changeFlag(3)\" label=\"Add\" icon=\"pi pi-trash\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </template>\r\n\r\n          <template #empty>No users found.</template>\r\n\r\n          <template #loading>Loading users data. Please wait.</template>\r\n\r\n          \r\n\r\n           \r\n          <Column field=\"fullName\" header=\"Full Name\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.fullName }}</template>\r\n          </Column>\r\n          <Column field=\"districtName\" header=\"District Name\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.districtName }}</template>\r\n          </Column>\r\n          <Column field=\"PASSWORD\" header=\"PASSWORD\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.PASSWORD }}</template>\r\n          </Column>\r\n          <Column field=\"mobile\" header=\"Mobile\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.mobile }}</template>\r\n          </Column>\r\n          <Column field=\"email\" header=\"Email\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.email }}</template>\r\n          </Column>\r\n          <Column field=\"loginEmail\" header=\"Login Email\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.loginEmail }}</template>\r\n          </Column>\r\n          <Column field=\"entityName\" header=\"Entity Name\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.entityName }}</template>\r\n          </Column>\r\n          <Column field=\"entityType\" header=\"Entity Type\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.entityType }}</template>\r\n          </Column>\r\n          <Column field=\"departmentId\" header=\"Department ID\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.departmentId }}</template>\r\n          </Column>\r\n          <Column field=\"cadreId\" header=\"Cadre ID\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.cadreId }}</template>\r\n          </Column>\r\n          <Column field=\"designationId\" header=\"Designation ID\" style=\"min-width: 12rem\">\r\n            <template #body=\"{ data }\">{{ data.designationId }}</template>\r\n          </Column>\r\n          <Column header=\"Actions\"  style=\"min-width:5rem\">\r\n            <template #body=\"{ data }\">\r\n                <span class=\"p-buttonset\">\r\n                    <Button @click=\"handleEditClick(data)\" label=\"Edit\" icon=\"pi pi-trash\" />\r\n                </span>\r\n                 <span class=\"p-buttonset\">\r\n                    <Button  @click=\"deleteData(data), reloadPage()\" label=\"Delete\" icon=\"pi pi-trash\" />\r\n                </span>\r\n            </template>\r\n          </Column>\r\n\r\n        </DataTable>\r\n      </div>\r\n    </template> -->\r\n  \r\n  \r\n    <!-- <template v-else-if=\"flag === 3\">\r\n      <div class=\"gap-2 box-login mx-auto p-8 max-w-2xl rounded-xl bg-white shadow\">\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"loginEmail\">Username</label>\r\n                    <InputText id=\"loginEmail\" v-model=\"userDetails.loginEmail\" />\r\n                    <small id=\"loginEmail-help\">Enter your loginEmail</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"PASSWORD\">Password</label>\r\n                    <InputText id=\"PASSWORD\" v-model=\"userDetails.PASSWORD\" type=\"PASSWORD\" />\r\n                    <small id=\"PASSWORD-help\">Enter your PASSWORD</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"fullName\">Full Name</label>\r\n                    <InputText id=\"fullName\" v-model=\"userDetails.fullName\" />\r\n                    <small id=\"fullName-help\">Enter your full name</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.district\" option-value=\"districtId\" :options=\"districtMaster\" placeholder=\"Select District\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.entityName\" option-value=\"entityName\" :options=\"entityMaster\" placeholder=\"Select Entity Name\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.entityType\" option-value=\"entityType\" :options=\"entityTypeMaster\" placeholder=\"Select Entity Type\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.role\" option-value=\"role\" :options=\"roleMaster\" placeholder=\"Select Role\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"email\">Email ID</label>\r\n                    <InputText id=\"email\" v-model=\"userDetails.email\" />\r\n                    <small id=\"email-help\">Enter your email address</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"mobileNumber\">Mobile Number</label>\r\n                    <InputText id=\"mobileNumber\" v-model=\"userDetails.mobile\" />\r\n                    <small id=\"mobileNumber-help\">Enter your mobile number</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"branch\">Branch/Department</label>\r\n                    <InputText id=\"branch\" v-model=\"userDetails.departmentId\" />\r\n                    <small id=\"branch-help\">Enter your branch/department</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"designation\">Designation</label>\r\n                    <InputText id=\"designation\" v-model=\"userDetails.designationId\" />\r\n                    <small id=\"designation-help\">Enter your designation</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"cadre\">Cadre</label>\r\n                    <InputText id=\"cadre\" v-model=\"userDetails.cadreId\" />\r\n                    <small id=\"cadre-help\">Enter your cadre</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <Button @click=\"submitForm(userDetails), changeFlag(1), reloadPage()\" icon=\"pi pi-check\" label=\"Submit\"></Button>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <Button @click=\"changeFlag(1), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </template> -->\r\n\r\n  <!-- <template v-else-if=\"flag === 4\">\r\n      <div class=\"gap-2 box-login mx-auto p-8 max-w-2xl rounded-xl bg-white shadow\">\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"loginEmail\">Username</label>\r\n                    <InputText id=\"loginEmail\" v-model=\"userDetails.loginEmail\" />\r\n                    <small id=\"loginEmail-help\">Enter your loginEmail</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"PASSWORD\">Password</label>\r\n                    <InputText id=\"PASSWORD\" v-model=\"userDetails.PASSWORD\" type=\"PASSWORD\" />\r\n                    <small id=\"PASSWORD-help\">Enter your PASSWORD</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"fullName\">Full Name</label>\r\n                    <InputText id=\"fullName\" v-model=\"userDetails.fullName\" />\r\n                    <small id=\"fullName-help\">Enter your full name</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.district\" option-value=\"districtId\" :options=\"districtMaster\" placeholder=\"Select District\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.entityName\" option-value=\"entityName\" :options=\"entityMaster\" placeholder=\"Select Entity Name\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.entityType\" option-value=\"entityType\" :options=\"entityTypeMaster\" placeholder=\"Select Entity Type\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <div class=\"card flex justify-content-center\">\r\n                        <Dropdown v-model=\"userDetails.role\" option-value=\"role\" :options=\"roleMaster\" placeholder=\"Select Role\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"email\">Email ID</label>\r\n                    <InputText id=\"email\" v-model=\"userDetails.email\" />\r\n                    <small id=\"email-help\">Enter your email address</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"mobileNumber\">Mobile Number</label>\r\n                    <InputText id=\"mobileNumber\" v-model=\"userDetails.mobile\" />\r\n                    <small id=\"mobileNumber-help\">Enter your mobile number</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"branch\">Branch/Department</label>\r\n                    <InputText id=\"branch\" v-model=\"userDetails.departmentId\" />\r\n                    <small id=\"branch-help\">Enter your branch/department</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"designation\">Designation</label>\r\n                    <InputText id=\"designation\" v-model=\"userDetails.designationId\" />\r\n                    <small id=\"designation-help\">Enter your designation</small>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <label for=\"cadre\">Cadre</label>\r\n                    <InputText id=\"cadre\" v-model=\"userDetails.cadreId\" />\r\n                    <small id=\"cadre-help\">Enter your cadre</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"fm-row\">\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <Button @click=\"submitForm(userDetails), changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Submit\"></Button>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </template> -->\r\n<!-- </div>\r\n</template> -->\r\n\r\n\r\n  <script setup>\r\nimport { ref, onMounted } from 'vue';\r\n//import { FilterMatchMode } from 'primevue/api';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\nimport FileUpload from 'primevue/fileupload';\r\nimport { useToast } from \"primevue/usetoast\";\r\n//import MQL from '@/plugins/mql.js';\r\nimport Button from 'primevue/button';\r\nimport Dialog from 'primevue/dialog';\r\nimport * as XLSX from \"xlsx\";\r\nimport Dropdown from 'primevue/dropdown';\r\n\r\nconst userDataSheet = ref([]);\r\nconst products = ref([]); // Your products array\r\nconst visible = ref(false);\r\nconst excelData = ref([]);\r\nconst fields = ['Username', 'Password', 'Full Name', 'District', 'Entity Name', 'Entity Type', 'Role', 'Email ID', 'Mobile Number', 'Branch/Department', 'Designation', 'Cadre'];\r\nconst toast = useToast();\r\n// const flag = ref(0)\r\nconst loading = ref(true);\r\n// const userData = ref([]); // Your data array\r\n\r\n// const userDetails = ref({\r\n//     loginEmail: '',\r\n//     PASSWORD: '',\r\n//     fullName: '',\r\n//     district: '',\r\n//     entityName: '',\r\n//     entityType: '',\r\n//     role: '',\r\n//     email: '',\r\n//     mobile: '',\r\n//     departmentId: '',\r\n//     designationId: '',\r\n//     cadreId: ''\r\n// });\r\n\r\n// const filters = ref({\r\n//   global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n//   fullName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   districtName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   PASSWORD: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   mobile: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   email: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   loginEmail: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   entityName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   entityType: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   departmentId: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   cadreId: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n//   designationId: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n// });\r\n\r\n\r\nfunction reloadPage() {\r\n        window.location.reload();\r\n        }\r\n\r\n// function handleEditClick(rowData) {\r\n//       userDetails.value = {...rowData}\r\n//       // Switch to the edit mode\r\n\r\n//       console.log(\"Printing rowData: \", rowData)\r\n//       console.log(\"Printing userDetails: \", userDetails)\r\n//       changeFlag(4);\r\n//     }\r\n\r\n// function changeFlag(newValue){\r\n//   flag.value = newValue\r\n// }\r\n\r\n// function fetchAllUsers(){\r\n//   new MQL()\r\n//     .setActivity('o.[FetchAllUsers]')\r\n//     .setData()\r\n//     .fetch()\r\n//     .then((rs) => {\r\n//       let res = rs.getActivity('FetchAllUsers', true);\r\n//       if (rs.isValid('FetchAllUsers')) {\r\n//         userData.value = res.result;\r\n//         console.log(\"from the function\", userData)\r\n//       } else {\r\n//         // rs.showErrorToast('FetchAllCountries');\r\n//       }\r\n//       loading.value = false; // Move loading to here\r\n//     });\r\n// }\r\n\r\n  onMounted(async () => {\r\n//   try {\r\n//     // const response = await fetch('http://localhost:8000/ExcelViewer');\r\n//     // const data = await response.json();\r\n//     // excelData.value = data;\r\n//     // console.log(\"printing excelData: \", excelData)\r\n//     // if (excelData.value.length > 0) {\r\n//     //   fields.value = Object.keys(excelData.value[0]);\r\n//     // }\r\n//     fetchAllUsers()\r\n//   } catch (error) {\r\n//     console.error('Error fetching data:', error);\r\n//   }\r\n  })\r\n\r\n// async function onAdvancedUpload(event) {\r\n//   const files = event.target.files;\r\n//   const formData = new FormData();\r\n\r\n//   for (let i = 0; i < files.length; i++) {\r\n//     formData.append('files', files[i]);\r\n//   }\r\n\r\n//   try {\r\n//     const response = await fetch('http://localhost:8000/api/upload', {\r\n//       method: 'POST',\r\n//       body: formData\r\n//     });\r\n\r\n//     if (response.ok) {\r\n//       console.log('Files uploaded successfully');\r\n//       // You can perform additional actions upon successful upload\r\n//     } else {\r\n//       console.error('Failed to upload files');\r\n//       // Handle error cases\r\n//     }\r\n//   } catch (error) {\r\n//     console.error('Error uploading files:', error);\r\n//   }\r\n// }\r\n\r\nconst onAdvancedUpload = async (event) => {\r\n  try {\r\n    const formData = new FormData();\r\n    userDataSheet.value.push(...event.files);\r\n    // Check if there are any selected files\r\n    if (userDataSheet.value.length === 0) {\r\n      console.error('No files selected', userDataSheet);\r\n      return;\r\n    }\r\n\r\n  try {\r\n    const files = event.files;\r\n\r\n    if (files.length === 0) {\r\n      console.error('No files selected');\r\n      return;\r\n    }\r\n\r\n    const newExcelDataArray = [];\r\n\r\n    for (const file of files) {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = async (e) => {\r\n        const data = new Uint8Array(e.target.result);\r\n        const workbook = XLSX.read(data, { type: 'array' });\r\n        const sheetName = workbook.SheetNames[0];\r\n        const worksheet = workbook.Sheets[sheetName];\r\n        const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, raw: false });\r\n        const headerRow = jsonData[0];\r\n\r\n        const formattedData = jsonData.slice(1).map((row) => {\r\n          const rowData = {};\r\n          headerRow.forEach((column, index) => {\r\n            rowData[column] = row[index];\r\n          });\r\n          return rowData;\r\n        });\r\n\r\n        newExcelDataArray.push(...formattedData);\r\n        excelData.value = [...newExcelDataArray]; // Ensure reactivity by creating a new array\r\n        console.log(\"Printing excelData: \", excelData)\r\n      };\r\n\r\n      reader.readAsArrayBuffer(file);\r\n      loading.value = false; // Move loading to here\r\n    }\r\n  } catch (error) {\r\n    console.error('Error processing files:', error);\r\n  }\r\n\r\n\r\n    // Append each selected file to the FormData object\r\n    userDataSheet.value.forEach(file => {\r\n      formData.append('userDataSheet', file);\r\n    });\r\n\r\n    // Send the FormData object to the backend\r\n    const response = await fetch('http://localhost:8000/api/upload', {\r\n      method: 'POST',\r\n      body: formData\r\n    });\r\n\r\n    if (response.ok) {\r\n      console.log('Files uploaded successfully', response);\r\n      // Handle the response and set the products variable\r\n      const data = await response.json();\r\n      products.value = data;\r\n      console.log(\"Pringing the response \", products.value)\r\n      //products.value = response.result\r\n      //changeFlag(2)\r\n    } else {\r\n      // Handle non-200 response status\r\n      console.error('Failed to upload files');\r\n    }\r\n  } catch (error) {\r\n    if (error.name === 'AbortError') {\r\n      // Handle user-aborted request\r\n      console.log('Request aborted by the user');\r\n    } else {\r\n      // Handle other types of errors\r\n      console.error('Error uploading files:', error);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n\r\n\r\n  <style scoped>\r\n  /* Add your styles if needed */\r\n  .custom-file-upload {\r\n    @apply flex items-center h-[var(--fm-height)] gap-3;\r\n}\r\n  </style>\r\n  "],"names":["userDataSheet","ref","products","visible","excelData","fields","useToast","loading","onMounted","async","onAdvancedUpload","event","formData","FormData","value","push","files","length","console","error","newExcelDataArray","file","reader","FileReader","onload","e","data","Uint8Array","target","result","workbook","XLSX.read","type","sheetName","SheetNames","worksheet","Sheets","jsonData","XLSX.utils","sheet_to_json","header","raw","headerRow","formattedData","slice","map","row","rowData","forEach","column","index","log","readAsArrayBuffer","append","response","fetch","method","body","ok","json","name"],"mappings":"4yBA2bM,MAAAA,EAAgBC,EAAI,IACpBC,EAAWD,EAAI,IACfE,EAAUF,GAAI,GACdG,EAAYH,EAAI,IAChBI,EAAS,CAAC,WAAY,WAAY,YAAa,WAAY,cAAe,cAAe,OAAQ,WAAY,gBAAiB,oBAAqB,cAAe,SAC/IC,IAEnB,MAAAC,EAAUN,GAAI,GAoElBO,GAAUC,cAyCN,MAAAC,EAAmBD,MAAOE,IAC1B,IACI,MAAAC,EAAW,IAAIC,SAGjB,GAFJb,EAAcc,MAAMC,QAAQJ,EAAMK,OAEC,IAA/BhB,EAAcc,MAAMG,OAEtB,YADQC,QAAAC,MAAM,oBAAqBnB,GAInC,IACF,MAAMgB,EAAQL,EAAMK,MAEhB,GAAiB,IAAjBA,EAAMC,OAER,YADAC,QAAQC,MAAM,qBAIhB,MAAMC,EAAoB,GAE1B,IAAA,MAAWC,KAAQL,EAAO,CAClB,MAAAM,EAAS,IAAIC,WAEZD,EAAAE,OAASf,MAAOgB,IACrB,MAAMC,EAAO,IAAIC,WAAWF,EAAEG,OAAOC,QAC/BC,EAAWC,EAAUL,EAAM,CAAEM,KAAM,UACnCC,EAAYH,EAASI,WAAW,GAChCC,EAAYL,EAASM,OAAOH,GAC5BI,EAAWC,EAAWC,cAAcJ,EAAW,CAAEK,OAAQ,EAAGC,KAAK,IACjEC,EAAYL,EAAS,GAErBM,EAAgBN,EAASO,MAAM,GAAGC,KAAKC,IAC3C,MAAMC,EAAU,CAAA,EAIT,OAHGL,EAAAM,SAAQ,CAACC,EAAQC,KACjBH,EAAAE,GAAUH,EAAII,EAAK,IAEtBH,CAAA,IAGS3B,EAAAL,QAAQ4B,GAChBvC,EAAAU,MAAQ,IAAIM,GACdF,QAAAiC,IAAI,uBAAwB/C,EAAS,EAG/CkB,EAAO8B,kBAAkB/B,GACzBd,EAAQO,OAAQ,CACjB,CACF,OAAQK,GACCD,QAAAC,MAAM,0BAA2BA,EAC1C,CAIenB,EAAAc,MAAMkC,SAAgB3B,IACzBT,EAAAyC,OAAO,gBAAiBhC,EAAI,IAIjC,MAAAiC,QAAiBC,MAAM,mCAAoC,CAC/DC,OAAQ,OACRC,KAAM7C,IAGR,GAAI0C,EAASI,GAAI,CACPxC,QAAAiC,IAAI,8BAA+BG,GAErC,MAAA5B,QAAa4B,EAASK,OAC5BzD,EAASY,MAAQY,EACTR,QAAAiC,IAAI,yBAA0BjD,EAASY,MAGrD,MAEMI,QAAQC,MAAM,yBAEjB,OAAQA,GACY,eAAfA,EAAMyC,KAER1C,QAAQiC,IAAI,+BAGJjC,QAAAC,MAAM,yBAA0BA,EAE3C"}