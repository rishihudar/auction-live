{"version":3,"file":"History-58a299e3.js","sources":["../../src/views/History.vue"],"sourcesContent":["<template>\r\n    <div class=\"box-preview-wrapper\" v-if=\"history.length > 0\">\r\n        <div class=\"box-section box-section-light\">\r\n            <div>\r\n                <div class=\"bs-header\">\r\n                    <h2>Approval History</h2>\r\n                </div>\r\n                <div>\r\n\r\n                    <div class=\"bs-item-holder\">\r\n                        <div class=\"bs-item col-span-12\">\r\n                            <ol v-for=\"(item, index) in history\" :key=\"index\">\r\n                                <li class=\"list-disc\">\r\n                                        Workflow Step: <span class=\"font-bold\"> {{ item.StepDisplayName }},</span>\r\n                                        last action By <span class=\"font-bold\"> {{ item.fullName }} </span>\r\n                                        ({{ item.roleName }}) On\r\n                                        <span class=\"font-bold\"> {{ item.createdOn }} </span>\r\n                                        Comment {{ item.comment }}, Decision taken {{ item.statusDisplayName }}\r\n                                </li>\r\n\r\n                            </ol>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Card from \"primevue/card\";\r\nimport MQL from \"@/plugins/mql.js\";\r\nimport { login } from \"../store/modules/login\";\r\nconst loginStore = login()\r\n\r\nconst history = ref([]);\r\n\r\nconst { workflowStepDetailsId } = defineProps({\r\n    workflowStepDetailsId: {\r\n        type: [Number, String],\r\n        default: null,\r\n        required: true\r\n    }\r\n})\r\n\r\nfunction FetchWorkflowStepDetailsHistory() {\r\n    new MQL()\r\n        .useManagementServer()\r\n        .setActivity(\"o.[FetchWorkflowStepDetailsHistory]\")\r\n        .setData({ \"organizationId\": loginStore.organizationId, \"workflowStepDetailsId\": workflowStepDetailsId })\r\n        .fetch()\r\n        .then(rs => {\r\n            let res = rs.getActivity(\"FetchWorkflowStepDetailsHistory\", true)\r\n            if (rs.isValid(\"FetchWorkflowStepDetailsHistory\")) {\r\n                console.log(res)\r\n\r\n                // Remove the console.log statement\r\n                // console.log(\"res.result\",res.result)\r\n\r\n                history.value = res.result.fetchWorkflowStepDetailsHistory;\r\n                history.value.push(res.result.fetchCurrent)\r\n                console.log(history.value, \"history.value\")\r\n            } else {\r\n                rs.showErrorToast(\"FetchWorkflowStepDetailsHistory\")\r\n            }\r\n        })\r\n}\r\n\r\n\r\nonMounted(() => {\r\n    FetchWorkflowStepDetailsHistory()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.workflow-step {\r\n    font-weight: bold;\r\n}\r\n</style>"],"names":["loginStore","login","history","ref","workflowStepDetailsId","__props","onMounted","MQL","useManagementServer","setActivity","setData","organizationId","fetch","then","rs","res","getActivity","isValid","console","log","value","result","fetchWorkflowStepDetailsHistory","push","fetchCurrent","showErrorToast"],"mappings":"olBAkCA,MAAMA,EAAaC,IAEbC,EAAUC,EAAI,KAEdC,sBAAEA,GAA0BC,SAgClCC,GAAU,MAvBN,IAAIC,GACCC,sBACAC,YAAY,uCACZC,QAAQ,CAAEC,eAAkBX,EAAWW,eAAgBP,sBAAyBA,IAChFQ,QACAC,MAAWC,IACR,IAAIC,EAAMD,EAAGE,YAAY,mCAAmC,GACxDF,EAAGG,QAAQ,oCACXC,QAAQC,IAAIJ,GAKJb,EAAAkB,MAAQL,EAAIM,OAAOC,gCAC3BpB,EAAQkB,MAAMG,KAAKR,EAAIM,OAAOG,cACtBN,QAAAC,IAAIjB,EAAQkB,MAAO,kBAE3BN,EAAGW,eAAe,kCACrB,GAMwB"}