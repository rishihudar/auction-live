{"version":3,"file":"UserManagement-bb4cc478.js","sources":["../../src/views/management/UserManagement.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <template v-if=\"flag === 0\">\r\n            <div class=\"card\">\r\n                <DataTable\r\n                responsiveLayout=\"scroll\"\r\n                v-model:filters=\"filters\"\r\n                :value=\"userData\"\r\n                paginator\r\n                :rows=\"10\"\r\n                :rowsPerPageOptions=\"[5, 10, 20, 50]\"\r\n                showGridlines\r\n                dataKey=\"id\" \r\n                :loading=\"loading\"\r\n                :globalFilterFields=\"['fullName', 'districtName', 'PASSWORD', 'mobile', 'email', 'loginEmail', 'entityName', 'entityType', 'departmentId', 'cadreId', 'designationId']\"\r\n                >\r\n                <template #header>\r\n                    <div class=\"flex justify-content-between\">\r\n                    <div class=\"mr-auto\">\r\n                        <span class=\"p-input-icon-left\">\r\n                        <i class=\"pi pi-search\" />\r\n                        <InputText v-model=\"filters['global'].value\" placeholder=\"Keyword Search\" />\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div class=\"flex flex-wrap align-items-center justify-content-center\">\r\n                        <span class=\"flex align-items-center\">\r\n                        <h1 class=\"mr-2\">Users</h1>\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div class=\"ml-auto\">\r\n                        <span class=\"p-buttonset\">\r\n                        <Button @click=\"$router.push({ name: 'ExcelViewer' })\" label=\"Add through Excel\" icon=\"pi pi-trash\" />\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div class=\"ml-auto\">\r\n                        <span class=\"p-buttonset\">\r\n                        <Button @click=\"changeFlag(3)\" label=\"Add\" icon=\"pi pi-trash\" />\r\n                        </span>\r\n                    </div>\r\n                    </div>\r\n                </template>\r\n\r\n                <template #empty>No users found.</template>\r\n\r\n                <template #loading>Loading users data. Please wait.</template>\r\n\r\n                \r\n\r\n                <!-- Additional columns -->\r\n                <Column field=\"fullName\" header=\"Full Name\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.fullName }}</template>\r\n                </Column>\r\n                <Column field=\"districtName\" header=\"District Name\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.districtName }}</template>\r\n                </Column>\r\n                <Column field=\"PASSWORD\" header=\"PASSWORD\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.PASSWORD }}</template>\r\n                </Column>\r\n                <Column field=\"mobile\" header=\"Mobile\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.mobile }}</template>\r\n                </Column>\r\n                <Column field=\"email\" header=\"Email\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.email }}</template>\r\n                </Column>\r\n                <Column field=\"loginEmail\" header=\"Login Email\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.loginEmail }}</template>\r\n                </Column>\r\n                <Column field=\"entityName\" header=\"Entity Name\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.entityName }}</template>\r\n                </Column>\r\n                <Column field=\"entityType\" header=\"Entity Type\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.entityType }}</template>\r\n                </Column>\r\n                <Column field=\"departmentId\" header=\"Department ID\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.departmentId }}</template>\r\n                </Column>\r\n                <Column field=\"cadreId\" header=\"Cadre ID\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.cadreId }}</template>\r\n                </Column>\r\n                <Column field=\"designationId\" header=\"Designation ID\" style=\"min-width: 12rem\">\r\n                    <template #body=\"{ data }\">{{ data.designationId }}</template>\r\n                </Column>\r\n                <Column header=\"Actions\"  style=\"min-width:5rem\">\r\n                    <template #body=\"{ data }\">\r\n                        <span class=\"p-buttonset\">\r\n                            <Button @click=\"handleEditClick(data)\" label=\"Edit\" icon=\"pi pi-trash\" />\r\n                        </span>\r\n                        <!-- <span class=\"p-buttonset\">\r\n                            <Button  @click=\"deleteData(data), reloadPage()\" label=\"Delete\" icon=\"pi pi-trash\" />\r\n                        </span> -->\r\n                    </template>\r\n                </Column>\r\n\r\n                </DataTable>\r\n            </div>\r\n        </template>\r\n  \r\n  \r\n        <template v-else-if=\"flag === 3\">\r\n            <div class=\"gap-2 box-login mx-auto p-8 max-w-2xl rounded-xl bg-white shadow\">\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"loginEmail\">Username</label>\r\n                            <InputText id=\"loginEmail\" v-model=\"userDetails.loginEmail\" />\r\n                            <small id=\"loginEmail-help\">Enter your loginEmail</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"PASSWORD\">Password</label>\r\n                            <InputText id=\"PASSWORD\" v-model=\"userDetails.PASSWORD\" type=\"PASSWORD\" />\r\n                            <small id=\"PASSWORD-help\">Enter your PASSWORD</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"fullName\">Full Name</label>\r\n                            <InputText id=\"fullName\" v-model=\"userDetails.fullName\" />\r\n                            <small id=\"fullName-help\">Enter your full name</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.district\" option-value=\"districtId\" :options=\"districtMaster\" placeholder=\"Select District\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.entityName\" option-value=\"entityName\" :options=\"entityMaster\" placeholder=\"Select Entity Name\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.entityType\" option-value=\"entityType\" :options=\"entityTypeMaster\" placeholder=\"Select Entity Type\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.role\" option-value=\"role\" :options=\"roleMaster\" placeholder=\"Select Role\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"email\">Email ID</label>\r\n                            <InputText id=\"email\" v-model=\"userDetails.email\" />\r\n                            <small id=\"email-help\">Enter your email address</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"mobileNumber\">Mobile Number</label>\r\n                            <InputText id=\"mobileNumber\" v-model=\"userDetails.mobile\" />\r\n                            <small id=\"mobileNumber-help\">Enter your mobile number</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"branch\">Branch/Department</label>\r\n                            <InputText id=\"branch\" v-model=\"userDetails.departmentId\" />\r\n                            <small id=\"branch-help\">Enter your branch/department</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"designation\">Designation</label>\r\n                            <InputText id=\"designation\" v-model=\"userDetails.designationId\" />\r\n                            <small id=\"designation-help\">Enter your designation</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"cadre\">Cadre</label>\r\n                            <InputText id=\"cadre\" v-model=\"userDetails.cadreId\" />\r\n                            <small id=\"cadre-help\">Enter your cadre</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <Button @click=\"submitForm(userDetails), changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Submit\"></Button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n        <template v-else-if=\"flag === 4\">\r\n            <div class=\"gap-2 box-login mx-auto p-8 max-w-2xl rounded-xl bg-white shadow\">\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"loginEmail\">Username</label>\r\n                            <InputText id=\"loginEmail\" v-model=\"userDetails.loginEmail\" />\r\n                            <small id=\"loginEmail-help\">Enter your loginEmail</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"PASSWORD\">Password</label>\r\n                            <InputText id=\"PASSWORD\" v-model=\"userDetails.PASSWORD\" type=\"PASSWORD\" />\r\n                            <small id=\"PASSWORD-help\">Enter your PASSWORD</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"fullName\">Full Name</label>\r\n                            <InputText id=\"fullName\" v-model=\"userDetails.fullName\" />\r\n                            <small id=\"fullName-help\">Enter your full name</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.district\" option-value=\"districtId\" :options=\"districtMaster\" placeholder=\"Select District\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.entityName\" option-value=\"entityName\" :options=\"entityMaster\" placeholder=\"Select Entity Name\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.entityType\" option-value=\"entityType\" :options=\"entityTypeMaster\" placeholder=\"Select Entity Type\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <div class=\"card flex justify-content-center\">\r\n                                <Dropdown v-model=\"userDetails.role\" option-value=\"role\" :options=\"roleMaster\" placeholder=\"Select Role\" class=\"w-full md:w-14rem\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"email\">Email ID</label>\r\n                            <InputText id=\"email\" v-model=\"userDetails.email\" />\r\n                            <small id=\"email-help\">Enter your email address</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"mobileNumber\">Mobile Number</label>\r\n                            <InputText id=\"mobileNumber\" v-model=\"userDetails.mobile\" />\r\n                            <small id=\"mobileNumber-help\">Enter your mobile number</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"branch\">Branch/Department</label>\r\n                            <InputText id=\"branch\" v-model=\"userDetails.departmentId\" />\r\n                            <small id=\"branch-help\">Enter your branch/department</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"designation\">Designation</label>\r\n                            <InputText id=\"designation\" v-model=\"userDetails.designationId\" />\r\n                            <small id=\"designation-help\">Enter your designation</small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <label for=\"cadre\">Cadre</label>\r\n                            <InputText id=\"cadre\" v-model=\"userDetails.cadreId\" />\r\n                            <small id=\"cadre-help\">Enter your cadre</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"fm-row\">\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <Button @click=\"submitForm(userDetails), changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Submit\"></Button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-1/2\">\r\n                        <div class=\"fm-group\">\r\n                            <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </div>\r\n</template>\r\n\r\n\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { FilterMatchMode } from 'primevue/api';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\nimport FileUpload from 'primevue/fileupload';\r\nimport { useToast } from \"primevue/usetoast\";\r\nimport MQL from '@/plugins/mql.js';\r\nimport Button from 'primevue/button';\r\nimport Dialog from 'primevue/dialog';\r\nimport * as XLSX from \"xlsx\";\r\nimport Dropdown from 'primevue/dropdown';\r\n\r\n\r\nconst flag = ref(0)\r\nconst loading = ref(true);\r\nconst userData = ref([]);\r\nconst filters = ref({\r\n  global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n  fullName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  districtName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  PASSWORD: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  mobile: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  email: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  loginEmail: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  entityName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  entityType: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  departmentId: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  cadreId: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n  designationId: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n});\r\nconst userDetails = ref({\r\n    loginEmail: '',\r\n    PASSWORD: '',\r\n    fullName: '',\r\n    district: '',\r\n    entityName: '',\r\n    entityType: '',\r\n    role: '',\r\n    email: '',\r\n    mobile: '',\r\n    departmentId: '',\r\n    designationId: '',\r\n    cadreId: ''\r\n});\r\n\r\nfunction reloadPage() {\r\n        window.location.reload();\r\n        }\r\n\r\nfunction handleEditClick(rowData) {\r\n      userDetails.value = {...rowData}\r\n      // Switch to the edit mode\r\n\r\n      console.log(\"Printing rowData: \", rowData)\r\n      console.log(\"Printing userDetails: \", userDetails)\r\n      changeFlag(4);\r\n    }\r\n\r\nfunction changeFlag(newValue){\r\n  flag.value = newValue\r\n}\r\n\r\nfunction fetchAllUsers(){\r\n  new MQL()\r\n    .useCoreServer()\r\n    .setActivity('o.[FetchAllUsers]')\r\n    .setData()\r\n    .fetch()\r\n    .then((rs) => {\r\n      let res = rs.getActivity('FetchAllUsers', true);\r\n      if (rs.isValid('FetchAllUsers')) {\r\n        userData.value = res.result;\r\n        console.log(\"from the function\", userData)\r\n      } else {\r\n        // rs.showErrorToast('FetchAllCountries');\r\n      }\r\n      loading.value = false; // Move loading to here\r\n    });\r\n}\r\n\r\nonMounted(async () => {\r\n  try {\r\n    // const response = await fetch('http://localhost:8000/ExcelViewer');\r\n    // const data = await response.json();\r\n    // excelData.value = data;\r\n    // console.log(\"printing excelData: \", excelData)\r\n    // if (excelData.value.length > 0) {\r\n    //   fields.value = Object.keys(excelData.value[0]);\r\n    // }\r\n    fetchAllUsers()\r\n  } catch (error) {\r\n    console.error('Error fetching data:', error);\r\n  }\r\n})\r\n</script>"],"names":["flag","ref","loading","userData","filters","global","value","matchMode","FilterMatchMode","CONTAINS","fullName","STARTS_WITH","districtName","PASSWORD","mobile","email","loginEmail","entityName","entityType","departmentId","cadreId","designationId","userDetails","district","role","reloadPage","window","location","reload","changeFlag","newValue","onMounted","async","MQL","useCoreServer","setActivity","setData","fetch","then","rs","res","getActivity","isValid","result","console","log","error","rowData"],"mappings":"oxIAqWM,MAAAA,GAAOC,EAAI,GACXC,GAAUD,GAAI,GACdE,GAAWF,EAAI,IACfG,GAAUH,EAAI,CAClBI,OAAQ,CAAEC,MAAO,KAAMC,UAAWC,EAAgBC,UAClDC,SAAU,CAAEJ,MAAO,KAAMC,UAAWC,EAAgBG,aACpDC,aAAc,CAAEN,MAAO,KAAMC,UAAWC,EAAgBG,aACxDE,SAAU,CAAEP,MAAO,KAAMC,UAAWC,EAAgBG,aACpDG,OAAQ,CAAER,MAAO,KAAMC,UAAWC,EAAgBG,aAClDI,MAAO,CAAET,MAAO,KAAMC,UAAWC,EAAgBG,aACjDK,WAAY,CAAEV,MAAO,KAAMC,UAAWC,EAAgBG,aACtDM,WAAY,CAAEX,MAAO,KAAMC,UAAWC,EAAgBG,aACtDO,WAAY,CAAEZ,MAAO,KAAMC,UAAWC,EAAgBG,aACtDQ,aAAc,CAAEb,MAAO,KAAMC,UAAWC,EAAgBG,aACxDS,QAAS,CAAEd,MAAO,KAAMC,UAAWC,EAAgBG,aACnDU,cAAe,CAAEf,MAAO,KAAMC,UAAWC,EAAgBG,eAErDW,GAAcrB,EAAI,CACpBe,WAAY,GACZH,SAAU,GACVH,SAAU,GACVa,SAAU,GACVN,WAAY,GACZC,WAAY,GACZM,KAAM,GACNT,MAAO,GACPD,OAAQ,GACRK,aAAc,GACdE,cAAe,GACfD,QAAS,KAGb,SAASK,KACDC,OAAOC,SAASC,QACf,CAWT,SAASC,GAAWC,GAClB9B,GAAKM,MAAQwB,CACf,QAoBAC,GAAUC,UACJ,KAlBJ,IAAIC,GACDC,gBACAC,YAAY,qBACZC,UACAC,QACAC,MAAMC,IACL,IAAIC,EAAMD,EAAGE,YAAY,iBAAiB,GACtCF,EAAGG,QAAQ,mBACbvC,GAASG,MAAQkC,EAAIG,OACbC,QAAAC,IAAI,oBAAqB1C,KAInCD,GAAQI,OAAQ,CAAA,GAcnB,OAAQwC,GACCF,QAAAE,MAAM,uBAAwBA,EACvC,i+EA3CsBC,IACPzB,GAAAhB,MAAQ,IAAIyC,GAGhBH,QAAAC,IAAI,qBAAsBE,GAC1BH,QAAAC,IAAI,yBAA0BvB,SACtCO,GAAW,GANjB,IAAyBkB"}