import{_ as e,d as a,B as s,C as l,r as o,o as r,e as t,b as n,a as i,u as c,w as u,F as d,J as f,l as v,s as m,E as p,ao as h,p as y,m as b}from"./index-4336d1e5.js";import{s as g}from"./fileupload.esm-829aa14d.js";import{r as w,u as x}from"./xlsx-a6110627.js";const E=e=>(y("data-v-31e715bb"),e=e(),b(),e),_={class:"card"},D={class:"card flex justify-content-center"},U=E((()=>n("div",{class:"inline-flex align-items-center justify-content-center gap-2"},[n("span",{class:"font-bold white-space-nowrap"},"Note")],-1))),k=E((()=>n("span",{class:"p-text-secondary block mb-5"},"The Following Users are already Available",-1))),j={class:"card"},F=E((()=>n("span",{class:"p-text-secondary block mb-5"},"Please check manually, and insert the record with Different Username",-1))),N=e({__name:"ExcelViewer",setup(e){const y=a([]),b=a([]),E=a(!1),N=a([]),P=["Username","Password","Full Name","District","Entity Name","Entity Type","Role","Email ID","Mobile Number","Branch/Department","Designation","Cadre"];s();const A=a(!0);l((async()=>{}));const C=async e=>{try{const a=new FormData;if(y.value.push(...e.files),0===y.value.length)return void console.error("No files selected",y);try{const a=e.files;if(0===a.length)return void console.error("No files selected");const s=[];for(const e of a){const a=new FileReader;a.onload=async e=>{const a=new Uint8Array(e.target.result),l=w(a,{type:"array"}),o=l.SheetNames[0],r=l.Sheets[o],t=x.sheet_to_json(r,{header:1,raw:!1}),n=t[0],i=t.slice(1).map((e=>{const a={};return n.forEach(((s,l)=>{a[s]=e[l]})),a}));s.push(...i),N.value=[...s],console.log("Printing excelData: ",N)},a.readAsArrayBuffer(e),A.value=!1}}catch(e){console.error("Error processing files:",e)}y.value.forEach((e=>{a.append("userDataSheet",e)}));const s=await fetch("http://localhost:8000/api/upload",{method:"POST",body:a});if(s.ok){console.log("Files uploaded successfully",s);const e=await s.json();b.value=e,console.log("Pringing the response ",b.value)}else console.error("Failed to upload files")}catch(e){"AbortError"===e.name?console.log("Request aborted by the user"):console.error("Error uploading files:",e)}};return(e,a)=>{const s=o("Toast");return r(),t(d,null,[n("div",_,[i(s),i(c(g),{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),accept:".xlsx, .csv,",multiple:!1,"max-file-size":2e5,"custom-upload":!0,onUploader:C},null,8,["modelValue"])]),n("div",null,[i(c(m),{value:N.value,showGridlines:"",loading:A.value},{default:u((()=>[(r(),t(d,null,f(P,(e=>i(c(v),{key:e,field:e,header:e},null,8,["field","header"]))),64))])),_:1},8,["value","loading"])]),n("div",D,[i(c(p),{label:"Check Unadded Data",onClick:a[1]||(a[1]=e=>E.value=!0)}),i(c(h),{visible:E.value,"onUpdate:visible":a[3]||(a[3]=e=>E.value=e),modal:"",header:"Edit Profile"},{header:u((()=>[U])),footer:u((()=>[i(c(p),{label:"Ok",text:"",severity:"secondary",onClick:a[2]||(a[2]=a=>(E.value=!1,e.$router.push({name:"UserManagement"}))),autofocus:""})])),default:u((()=>[k,n("div",j,[i(c(m),{value:b.value,tableStyle:"min-width: 50rem"},{default:u((()=>[i(c(v),{field:"username",header:"Username"})])),_:1},8,["value"])]),F])),_:1},8,["visible"])])],64)}}},[["__scopeId","data-v-31e715bb"],["__file","D:/acution-live/auction-server/auction-live/src/views/masters/ExcelViewer.vue"]]);export{N as default};
//# sourceMappingURL=ExcelViewer-7d0d590c.js.map
