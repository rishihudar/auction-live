{"version":3,"file":"StateMaster-a093b872.js","sources":["../../src/views/masters/StateMaster.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <template v-if=\"flag === 0\">\r\n            <div class=\"card\">\r\n                <DataTable responsiveLayout=\"scroll\" v-model:filters=\"filters\" :value=\"states\" paginator :rows=\"10\"\r\n                    dataKey=\"id\" filterDisplay=\"row\" :loading=\"loading\"\r\n                    :globalFilterFields=\"['stateName', 'stateCode', 'isUnionTerritories']\">\r\n                    <template #header>\r\n                        <div class=\"flex justify-content-end\">\r\n                            <span class=\"p-input-icon-left\">\r\n                                <i class=\"pi pi-search\" />\r\n                                <InputText v-model=\"filters['global'].value\" placeholder=\"Keyword Search\" />\r\n                            </span>\r\n                            <div class=\"ml-auto\">\r\n                                <span class=\"p-buttonset\">\r\n                                    <Button label=\"ADD\" @click=\"changeFlag(1)\" icon=\"pi pi-trash\" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </template>\r\n                    <template #empty>No states found.</template>\r\n                    <template #loading>Loading state data. Please wait.</template>\r\n                    <Column field=\"stateName\" header=\"State Name\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.stateName }}\r\n                        </template>\r\n                        <template #filter=\"{ filterModel, filterCallback }\">\r\n                            <InputText v-model=\"filterModel.value\" @input=\"filterCallback()\" class=\"p-column-filter\"\r\n                                placeholder=\"Search by state name\" />\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"stateCode\" header=\"State Code\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.stateCode }}\r\n                        </template>\r\n                        <template #filter=\"{ filterModel, filterCallback }\">\r\n                            <InputText v-model=\"filterModel.value\" @input=\"filterCallback()\" class=\"p-column-filter\"\r\n                                placeholder=\"Search by  state code\" />\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"isUnionTerritories\" header=\"UnionTerritories\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.isUnionTerritories }}\r\n                        </template>\r\n                        <template #filter=\"{ filterModel, filterCallback }\">\r\n                            <InputText v-model=\"filterModel.value\" @input=\"filterCallback()\" class=\"p-column-filter\"\r\n                                placeholder=\"Search by Yes or No\" />\r\n                        </template>\r\n                    </Column>\r\n                    <Column header=\"Actions\" style=\"min-width:12rem\">\r\n\r\n                        <template #body=\"{ data }\">\r\n\r\n                            <span class=\"p-buttonset\">\r\n                                <Button label=\"Edit\" @click=\"editState(data), changeFlag(2)\" icon=\"pi pi-trash\" />\r\n                            </span>\r\n                            <!-- <span class=\"p-buttonset\">\r\n                                <Button label=\"Delete\" @click=\"deleteState(data),reloadPage()\" icon=\"pi pi-trash\" />\r\n                            </span> -->\r\n\r\n                        </template>\r\n                    </Column>\r\n                </DataTable>\r\n            </div>\r\n        </template>\r\n        <template v-else-if=\"flag === 1\">\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"countryName\">Country Name</label>\r\n                        <!-- Bind the selected country to stateData.fklCountryId -->\r\n                        <Dropdown v-model=\"stateData.countryId\" optionValue=\"countryId\" editable :options=\"countries\"\r\n                            optionLabel=\"countryName\" placeholder=\"Select a Country\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"stateName\">State Name</label>\r\n                        <!-- Bind the state name to stateData.vsStateName -->\r\n                        <InputText id=\"stateName\" v-model=\"stateData.stateName\" />\r\n                        <small id=\"stateName-help\">Enter State name (e.g., Uttar Pradesh)</small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"stateCode\">State Code</label>\r\n                        <!-- Bind the state code to stateData.vsStateCode -->\r\n                        <InputText id=\"stateCode\" v-model=\"stateData.stateCode\" />\r\n                        <small id=\"stateCode-help\">Enter State Code (e.g., AN)</small>\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"unionTerritories\">Union Territories</label>\r\n                        <!-- Directly include the Checkbox component in the template -->\r\n                        <div class=\"card flex justify-content-center\">\r\n                            <Checkbox v-model=\"stateData.isUnionTerritories\" :binary=\"true\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <Button @click=\"insertState(stateData), changeFlag(0), reloadPage()\" icon=\"pi pi-check\"\r\n                            label=\"Submit\"></Button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n        <template v-else-if=\"flag === 2\">\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"countryName\">Country Name</label>\r\n                        <!-- Bind the selected country to stateData.fklCountryId -->\r\n                        <Dropdown v-model=\"stateData.countryId\" optionValue=\"countryId\" :options=\"countries\"\r\n                            optionLabel=\"countryName\" placeholder=\"Select a City\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"stateName\">State Name</label>\r\n                        <InputText id=\"stateName\" v-model=\"stateData.stateName\" />\r\n                        <small id=\"username-help\">Enter State name E.g UttarPradesh</small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"stateCode\">State Code</label>\r\n                        <InputText id=\"stateCode\" v-model=\"stateData.stateCode\" />\r\n                        <small id=\"username-help\">Enter State Code E.g 91</small>\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"unionTerritories\">Union Territories</label>\r\n                        <!-- Directly include the Checkbox component in the template -->\r\n                        <div class=\"card flex justify-content-center\">\r\n                            <Checkbox v-model=\"stateData.isUnionTerritories\" :binary=\"true\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- <div>\r\n                <h1>{{ stateData }}</h1>\r\n            </div> -->\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <Button @click=\" updateState(stateData), changeFlag(0), reloadPage()\" icon=\"pi pi-check\"\r\n                            label=\"Submit\"></Button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n    </div>\r\n</template>\r\n  \r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { FilterMatchMode } from 'primevue/api';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\nimport InputText from 'primevue/inputtext';\r\nimport MQL from '@/plugins/mql.js';\r\nimport Button from 'primevue/button';\r\n\r\nimport Checkbox from 'primevue/checkbox';\r\n\r\nimport Dropdown from 'primevue/dropdown';\r\n\r\nconst states = ref([]);\r\nconst loading = ref(true);\r\nvar flag = ref(0);\r\n\r\nconst stateData = ref({\r\n    stateName: '',\r\n    stateCode: '',\r\n    isUnionTerritories: false,\r\n  //  countryId: '',\r\n\r\n});\r\n\r\nconst countries = ref([]);\r\n\r\nconst filters = ref({\r\n    global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n    stateName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n    stateCode: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n    isUnionTerritories: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n\r\n});\r\nfunction changeFlag(newValue) {\r\n    flag.value = newValue\r\n    ref(flag)\r\n    console.log(\"getting from change function\", flag)\r\n}\r\n\r\nfunction FetchStateName() {\r\n    new MQL()\r\n        .useCoreServer()\r\n        .setActivity('o.[FetchAllState]')\r\n        .setData()\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('FetchAllState', true);\r\n            if (rs.isValid('FetchAllState')) {\r\n                console.log(res.result);\r\n                //states.value = res.result;\r\n                states.value = res.result.map(state => ({\r\n                    ...state,\r\n                    isUnionTerritories: state.isUnionTerritories == 1 ? 'Yes' : 'No'\r\n                }));\r\n            } else {\r\n                rs.showErrorToast('FetchAllState');\r\n            }\r\n            loading.value = false; // Move loading to here\r\n        });\r\n}\r\nfunction FetchCountryName() {\r\n    new MQL()\r\n        .useCoreServer()\r\n        .setActivity('o.[FetchAllCountries]')\r\n        .setData()\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('FetchAllCountries', true);\r\n            if (rs.isValid('FetchAllCountries')) {\r\n                console.log(res.result);\r\n                countries.value = res.result;\r\n\r\n            } else {\r\n                rs.showErrorToast('FetchAllCountries');\r\n            }\r\n            loading.value = false; // Move loading to here\r\n        });\r\n}\r\nfunction insertState(stateData) {\r\n    if (stateData.stateName == \"\") {\r\n        console.log(\"Please provide all Details\")\r\n\r\n    } else {\r\n\r\n\r\n        new MQL()\r\n            .useCoreServer()\r\n            .setActivity('o.[InsertState]')\r\n            .setData(stateData)\r\n            .fetch()\r\n            .then((rs) => {\r\n                let res = rs.getActivity('InsertState', true);\r\n                if (rs.isValid('InsertState')) {\r\n                    console.log(res.result);\r\n                    console.log(\"stateData from Insert\", stateData);\r\n                } else {\r\n                    rs.showErrorToast('InsertState');\r\n                }\r\n                loading.value = false;\r\n            });\r\n    }\r\n}\r\nfunction updateState(stateData) {\r\n    new MQL()\r\n        .useCoreServer()\r\n        .setActivity('o.[UpdateStateById]')\r\n        .setData(stateData)\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('UpdateStateById', true);\r\n            if (rs.isValid('UpdateStateById')) {\r\n                console.log(res.result);\r\n                console.log(\"stateData update\", stateData);\r\n                // Optionally, you can reload the page or update the state list after insertion\r\n\r\n            } else {\r\n                rs.showErrorToast('UpdateState');\r\n            }\r\n            loading.value = false;\r\n        });\r\n}\r\nfunction reloadPage() {\r\n    window.location.reload();\r\n    console.log(\"we are reloading page\")\r\n}\r\nfunction editState(state) {\r\n    // Set stateData to the values of the selected state\r\n    stateData.value = { ...state };\r\n    stateData.value = { ...stateData.value, isUnionTerritories: stateData.value.isUnionTerritories == 'Yes' ? true : false };\r\n\r\n\r\n    console.log(\"from edit function\", stateData)\r\n    // Update the flag to indicate edit mode\r\n    changeFlag(2);\r\n}\r\nfunction deleteState(data) {\r\n    new MQL()\r\n        .useCoreServer()\r\n        .setActivity('o.[DeleteStateById]')\r\n        .setData(data)\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('DeleteStateById', true);\r\n            if (rs.isValid('DeleteStateById')) {\r\n                console.log(res.result);\r\n            } else {\r\n                rs.showErrorToast('DeleteStateById');\r\n            }\r\n            loading.value = false;\r\n        });\r\n}\r\n\r\n\r\nonMounted(() => {\r\n    FetchStateName();\r\n    FetchCountryName();\r\n\r\n});\r\n\r\n\r\n\r\n</script>\r\n  \r\n<style scoped>\r\n.flex-column {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.gap-2 {\r\n    gap: 2rem;\r\n    /* Adjust the gap as needed */\r\n}\r\n\r\n.form-row {\r\n    margin-bottom: 1rem;\r\n    /* Adjust the margin as needed */\r\n}\r\n</style>"],"names":["states","ref","loading","flag","stateData","stateName","stateCode","isUnionTerritories","countries","filters","global","value","matchMode","FilterMatchMode","CONTAINS","STARTS_WITH","changeFlag","newValue","console","log","reloadPage","window","location","reload","onMounted","MQL","useCoreServer","setActivity","setData","fetch","then","rs","res","getActivity","isValid","result","map","state","showErrorToast"],"mappings":"47DA+LM,MAAAA,EAASC,EAAI,IACbC,EAAUD,GAAI,GAChB,IAAAE,EAAOF,EAAI,GAEf,MAAMG,GAAYH,EAAI,CAClBI,UAAW,GACXC,UAAW,GACXC,oBAAoB,IAKlBC,GAAYP,EAAI,IAEhBQ,GAAUR,EAAI,CAChBS,OAAQ,CAAEC,MAAO,KAAMC,UAAWC,EAAgBC,UAClDT,UAAW,CAAEM,MAAO,KAAMC,UAAWC,EAAgBE,aACrDT,UAAW,CAAEK,MAAO,KAAMC,UAAWC,EAAgBE,aACrDR,mBAAoB,CAAEI,MAAO,KAAMC,UAAWC,EAAgBE,eAGlE,SAASC,GAAWC,GAChBd,EAAKQ,MAAQM,EACbhB,EAAIE,GACIe,QAAAC,IAAI,+BAAgChB,EAChD,CAoFA,SAASiB,KACLC,OAAOC,SAASC,SAChBL,QAAQC,IAAI,wBAChB,QA6BAK,GAAU,MAjHN,IAAIC,GACCC,gBACAC,YAAY,qBACZC,UACAC,QACAC,MAAMC,IACH,IAAIC,EAAMD,EAAGE,YAAY,iBAAiB,GACtCF,EAAGG,QAAQ,kBACHhB,QAAAC,IAAIa,EAAIG,QAEhBnC,EAAOW,MAAQqB,EAAIG,OAAOC,KAAcC,IAAA,IACjCA,EACH9B,mBAAgD,GAA5B8B,EAAM9B,mBAA0B,MAAQ,UAGhEwB,EAAGO,eAAe,iBAEtBpC,EAAQS,OAAQ,CAAA,KAIxB,IAAIc,GACCC,gBACAC,YAAY,yBACZC,UACAC,QACAC,MAAMC,IACH,IAAIC,EAAMD,EAAGE,YAAY,qBAAqB,GAC1CF,EAAGG,QAAQ,sBACHhB,QAAAC,IAAIa,EAAIG,QAChB3B,GAAUG,MAAQqB,EAAIG,QAGtBJ,EAAGO,eAAe,qBAEtBpC,EAAQS,OAAQ,CAAA,w7DAkDT0B,IAELjC,GAAAO,MAAQ,IAAK0B,GACbjC,GAAAO,MAAQ,IAAKP,GAAUO,MAAOJ,mBAA0D,OAAtCH,GAAUO,MAAMJ,oBAGpEW,QAAAC,IAAI,qBAAsBf,IAElCY,GAAW,SARf,IAAmBqB,+gCA9CY,KADVjC,YACHC,UACVa,QAAQC,IAAI,+BAKZ,IAAIM,GACCC,gBACAC,YAAY,mBACZC,QAAQxB,GACRyB,QACAC,MAAMC,IACH,IAAIC,EAAMD,EAAGE,YAAY,eAAe,GACpCF,EAAGG,QAAQ,gBACHhB,QAAAC,IAAIa,EAAIG,QACRjB,QAAAC,IAAI,wBAAyBf,IAErC2B,EAAGO,eAAe,eAEtBpC,EAAQS,OAAQ,CAAA,eApBhC,IAAqBP,ylCAwBAA,YACjB,IAAIqB,GACCC,gBACAC,YAAY,uBACZC,QAAQxB,GACRyB,QACAC,MAAMC,IACH,IAAIC,EAAMD,EAAGE,YAAY,mBAAmB,GACxCF,EAAGG,QAAQ,oBACHhB,QAAAC,IAAIa,EAAIG,QACRjB,QAAAC,IAAI,mBAAoBf,IAIhC2B,EAAGO,eAAe,eAEtBpC,EAAQS,OAAQ,CAAA,eAhB5B,IAAqBP"}