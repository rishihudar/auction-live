{"version":3,"file":"DistrictMaster-eb949a0f.js","sources":["../../src/views/masters/DistrictMaster.vue"],"sourcesContent":["<template>\r\n    <div>\r\n<template v-if=\"flag===0\">\r\n    <div class=\"card\">\r\n        <DataTable \r\n        responsiveLayout=\"scroll\" \r\n        v-model:filters=\"filters\"\r\n        :value=\"district\" \r\n        paginator \r\n        :rows=\"10\" \r\n        :rowsPerPageOptions=\"[5, 10, 20, 50]\"\r\n        showGridlines\r\n        dataKey=\"id\"\r\n        filterDisplay=\"row\" \r\n        :loading=\"loading\" \r\n        :globalFilterFields=\"['stateId', 'districtName']\">\r\n\r\n            <template #header>\r\n                <div class=\"flex justify-content-between\">\r\n\r\n                    <div class=\"mr-auto\">\r\n                        <span class=\"p-input-icon-left\">\r\n                            <i class=\"pi pi-search\" />\r\n                            <InputText v-model=\"filters['global'].value\" placeholder=\"Keyword Search\" />\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div class=\"flex flex-wrap align-items-center justify-content-center\">\r\n                        <span class=\"flex align-items-center\">\r\n                            <h1 class=\"mr-2\">DISTRICT MASTER</h1>\r\n                        </span>\r\n                    </div>\r\n                    \r\n                    <div class=\"ml-auto\">\r\n                        <span class=\"p-buttonset\">\r\n                            <Button @click=\"changeFlag(1)\" label=\"Add\" icon=\"pi pi-trash\" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n\r\n            <template #empty>No District found.</template>\r\n\r\n            <template #loading>Loading District data. Please wait.</template>\r\n            \r\n            <Column field=\"districtName\" header=\"District Name\" style=\"min-width: 12rem\">\r\n                <template #body=\"{ data }\">\r\n                    {{ data.districtName }}\r\n                </template>\r\n                <template #filter=\"{ filterModel, filterCallback }\">\r\n                    <InputText v-model=\"filterModel.value\" @input=\"filterCallback()\" class=\"p-column-filter\"\r\n                        placeholder=\"District Name\" />\r\n                </template>\r\n            </Column>\r\n           \r\n            <Column header=\"Actions\"  style=\"min-width:5rem\">\r\n\r\n                <template #body=\"{ data }\">\r\n                \r\n                    <span class=\"p-buttonset\">\r\n                        <Button @click=\"handleEditClick(data)\" label=\"Edit\" icon=\"pi pi-trash\" />\r\n                    </span>\r\n                \r\n                    <!-- <span class=\"p-buttonset\">\r\n                        <Button  @click=\"deleteData(data), reloadPage()\" label=\"Delete\" icon=\"pi pi-trash\" />\r\n                    </span> -->\r\n\r\n                </template>\r\n            </Column>\r\n        </DataTable>\r\n    </div>\r\n</template>\r\n<template v-else-if=\"flag === 1\">\r\n  <div class=\"flex flex-column gap-2 box-login mx-auto p-8 max-w-2xl rounded-xl bg-white shadow\">\r\n    \r\n    <div class=\"fm-row\">\r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <div class=\"card flex justify-content-center\">\r\n                    <Dropdown v-model=\"districtData.stateId\"  option-value=\"stateId\" :options=\"state\" optionLabel=\"stateName\" placeholder=\"Select a State\" class=\"w-full md:w-14rem\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <label for=\"districtName\">District Name</label>\r\n                <InputText id=\"districtName\" v-model=\"districtData.districtName\" />\r\n                <small id=\"username-help\">Enter District name E.g Nandurbar</small>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"fm-row\">\r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <Button @click=\"submitForm(districtData), changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Submit\"></Button>\r\n            </div>\r\n        </div>\r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<template v-else-if=\"flag === 2\">\r\n  <div class=\"flex flex-column gap-2 box-login mx-auto p-8 max-w-2xl rounded-xl bg-white shadow\">\r\n    \r\n    <div class=\"fm-row\">\r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <div class=\"card flex justify-content-center\">\r\n                    <Dropdown v-model=\"districtData.stateId\"  option-value=\"stateId\" :options=\"state\" optionLabel=\"stateName\" placeholder=\"Select a State\" class=\"w-full md:w-14rem\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    \r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <label for=\"districtName\">District Name</label>\r\n                <InputText id=\"districtName\" v-model=\"districtData.districtName\" />\r\n                <small id=\"username-help\">Enter District name E.g Nandurbar</small>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"fm-row\">\r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <Button @click=\"updateData(districtData), changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Submit\"></Button>\r\n            </div>\r\n        </div>\r\n        <div class=\"w-1/2\">\r\n            <div class=\"fm-group\">\r\n                <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n</div>\r\n</template>\r\n  \r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { FilterMatchMode } from 'primevue/api';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\nimport InputText from 'primevue/inputtext';\r\nimport MQL from '@/plugins/mql.js';\r\nimport Button from 'primevue/button';\r\nimport ScrollTop from 'primevue/scrolltop';\r\nimport ScrollPanel from 'primevue/scrollpanel';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport Dropdown from 'primevue/dropdown';\r\n\r\n\r\n\r\n// export default {\r\n//     components: {\r\n//         DataTable,\r\n//         Column,\r\n//         Button,\r\n//         ScrollTop,\r\n//         ScrollPanel,\r\n//         InputText,\r\n//         Dropdown,\r\n    \r\n//     },\r\n//     setup() {\r\n        //const selectedState = ref();\r\n        const state = ref([]);\r\n        const district = ref([]);\r\n        const loading = ref(true);\r\n        const toast = useToast();\r\n        var flag = ref(0);\r\n\r\n        const filters = ref({\r\n            global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n            stateId: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            districtName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n\r\n        });\r\n\r\n        const districtData = ref({\r\n                stateId: '',\r\n                districtName: '',\r\n            });\r\n\r\n\r\n      function handleEditClick(rowData) {\r\n                districtData.value = {...rowData}\r\n                // Switch to the edit mode\r\n                changeFlag(2);\r\n                }\r\n\r\n        function updateData(districtData){\r\n                // Perform form Edit logic here\r\n                new MQL()\r\n                    .useCoreServer()\r\n                    .setActivity('o.[UpdateDistrictById]')\r\n                    .setData({stateId: districtData.stateId, districtName: districtData.districtName, districtId: districtData.districtId})\r\n                    .fetch()\r\n                    .then((rs) => {\r\n                    let res = rs.getActivity('UpdateDistrictById', true);\r\n                    if (rs.isValid('UpdateDistrictById')) {\r\n                        // Show success toast\r\n                        showSuccess \r\n                        //showToastSuccess('Form Submitted Successfully.', res.result);\r\n                    } else {\r\n                        // Show error toast\r\n                        showError\r\n                        //rs.showErrorToast('InsertCoInsertDistrictuntry');\r\n                    }\r\n                    loading.value = false; // Move loading to here\r\n                    })\r\n                }\r\n\r\n\r\n      const submitForm = (districtData) => {\r\n\r\n        // Check for null values in countryData\r\n        if (districtData.districtName==\"\") {\r\n            showError()\r\n            //showToastError('Form contains null values.');\r\n            return;\r\n        }else{\r\n        \r\n        // Perform form submission logic here\r\n        new MQL()\r\n            .useCoreServer()\r\n            .setActivity('o.[InsertDistrict]')\r\n            .setData({stateId: districtData.stateId, districtName: districtData.districtName})\r\n            .fetch()\r\n            .then((rs) => {\r\n            let res = rs.getActivity('InsertDistrict', true);\r\n            if (rs.isValid('InsertDistrict')) {\r\n                // Show success toast\r\n                rs.showSuccess(\"data submmitted\")\r\n                //showToastSuccess('Form Submitted Successfully.', res.result);\r\n            } else {\r\n                // Show error toast\r\n                showError()\r\n                //rs.showErrorToast('InsertCoInsertDistrictuntry');\r\n            }\r\n            loading.value = false; // Move loading to here\r\n            })\r\n\r\n            .catch((error) => {\r\n            console.error('Error submitting form:', error);\r\n            showError\r\n           // showToastError('An error occurred during form submission.');\r\n            loading.value = false;\r\n            });\r\n        }\r\n            };\r\n\r\n\r\n        function getData() {\r\n            new MQL()\r\n                .useCoreServer()\r\n                .setActivity('o.[FetchAllDistrict]')\r\n                .setData()\r\n                .fetch()\r\n                .then((rs) => {\r\n                    let res = rs.getActivity('FetchAllDistrict', true);\r\n                    if (rs.isValid('FetchAllDistrict')) {\r\n                        //showToastSuccess(\"Fetch district data\", res.result)\r\n                        showSuccess\r\n                        district.value = res.result;\r\n                    } else {\r\n                        showError\r\n                       // rs.showErrorToast('FetchAllDistrict');\r\n                    }\r\n                    loading.value = false; // Move loading to here\r\n                });\r\n        }\r\n\r\n\r\n        function deleteData(rowData) {\r\n           // countryData.value = {...rowData}\r\n            new MQL()\r\n                .useCoreServer()\r\n                .setActivity('o.[DeleteDistrictById]')\r\n                .setData(rowData)\r\n                .fetch()\r\n                .then((rs) => {\r\n                    let res = rs.getActivity('DeleteDistrictById', true);\r\n                    if (rs.isValid('DeleteDistrictById')) {\r\n                        showSuccess\r\n                        \r\n                    } else {\r\n                        showError\r\n                       // rs.showErrorToast('FetchAllCountries');\r\n                    }\r\n                    loading.value = false; // Move loading to here\r\n                });\r\n        }\r\n\r\n        function getStateData() {\r\n            new MQL()\r\n                .useCoreServer()\r\n                .setActivity('o.[FetchAllState]')\r\n                .setData()\r\n                .fetch()\r\n                .then((rs) => {\r\n                    let res = rs.getActivity('FetchAllState', true);\r\n                    if (rs.isValid('FetchAllState')) {\r\n                        //showToastSuccess(\"Fetch state data\", res.result)\r\n                        showSuccess\r\n                        state.value = res.result;\r\n                    } else {\r\n                        showError\r\n                        //rs.showErrorToast('FetchAllState');\r\n                    }\r\n                    loading.value = false; // Move loading to here\r\n                });\r\n        }\r\n        function changeFlag(newValue){\r\n            flag.value = newValue\r\n            ref(flag)\r\n        }\r\n\r\n        function reloadPage() {\r\n        window.location.reload();\r\n        }\r\n\r\n        const hasNullValues = (data) => {\r\n        for (const key in data) {\r\n            if (data[key] === null || data[key] === undefined) {\r\n            return true;\r\n            }\r\n        }\r\n        return false;\r\n        };\r\n\r\n    //     const showToastSuccess = (message) => {\r\n    //     showToast({ severity: 'success', summary: 'Success', detail: message });\r\n    //     };\r\n\r\n    //     const showToastError = (message) => {\r\n    //     showToast({ severity: 'error', summary: 'Error', detail: message });\r\n    //     };\r\n\r\n    //     const showToast = (options) => {\r\n    //    // const toast = this.$refs.toast;\r\n    //     if (toast) {\r\n    //         toast.add(options);\r\n    //     }\r\n    //     };\r\n        \r\n        const showSuccess = () => {\r\n                toast.add({ severity: 'success', summary: 'Success Message', detail: 'Message Content', life: 3000 });\r\n            };\r\n\r\n        const showInfo = () => {\r\n                toast.add({ severity: 'info', summary: 'Info Message', detail: 'Message Content', life: 3000 });\r\n            };\r\n\r\n        const showWarn = () => {\r\n                toast.add({ severity: 'warn', summary: 'Warn Message', detail: 'Message Content', life: 3000 });\r\n            };\r\n\r\n        const showError = () => {\r\n                toast.add({ severity: 'error', summary: 'Error Message', detail: 'Message Content', life: 3000 });\r\n            };\r\n\r\n\r\n        onMounted(() => {\r\n            getData();\r\n            getStateData();\r\n        });\r\n\r\n//         return {\r\n//             district,\r\n//             state,\r\n//             //selectedState,\r\n//             loading,\r\n//             filters,\r\n//             districtData,\r\n//             flag,\r\n//             toast,\r\n//             changeFlag,\r\n//             reloadPage,\r\n//             handleEditClick,\r\n//             // showToastSuccess,\r\n//             // showToastError,\r\n//             // showToast,\r\n//             showSuccess,\r\n//             showInfo,\r\n//             showWarn,\r\n//             showError,\r\n//             updateData,\r\n//             submitForm,\r\n//             deleteData\r\n//         };\r\n//     },\r\n// };\r\n</script>\r\n\r\n<style scoped>\r\n  .flex-column {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .gap-2 {\r\n    gap: 2rem; /* Adjust the gap as needed */\r\n  }\r\n\r\n  .form-row {\r\n    margin-bottom: 1rem; /* Adjust the margin as needed */\r\n  }\r\n</style>"],"names":["state","ref","district","loading","toast","useToast","flag","filters","global","value","matchMode","FilterMatchMode","CONTAINS","stateId","STARTS_WITH","districtName","districtData","changeFlag","newValue","reloadPage","window","location","reload","showError","add","severity","summary","detail","life","onMounted","MQL","useCoreServer","setActivity","setData","fetch","then","rs","res","getActivity","isValid","result","rowData","showSuccess","catch","error","console","districtId"],"mappings":"4rDA2Kc,MAAAA,EAAQC,EAAI,IACZC,EAAWD,EAAI,IACfE,EAAUF,GAAI,GACdG,GAAQC,IACV,IAAAC,GAAOL,EAAI,GAEf,MAAMM,GAAUN,EAAI,CAChBO,OAAQ,CAAEC,MAAO,KAAMC,UAAWC,EAAgBC,UAClDC,QAAS,CAAEJ,MAAO,KAAMC,UAAWC,EAAgBG,aACnDC,aAAc,CAAEN,MAAO,KAAMC,UAAWC,EAAgBG,eAItDE,GAAef,EAAI,CACjBY,QAAS,GACTE,aAAc,KAoItB,SAASE,GAAWC,GAChBZ,GAAKG,MAAQS,EACbjB,EAAIK,GACP,CAED,SAASa,KACTC,OAAOC,SAASC,QACf,CAsCD,MAAMC,GAAY,KACJnB,GAAAoB,IAAI,CAAEC,SAAU,QAASC,QAAS,gBAAiBC,OAAQ,kBAAmBC,KAAM,KAAM,SAIxGC,GAAU,MA7GN,IAAIC,GACCC,gBACAC,YAAY,wBACZC,UACAC,QACAC,MAAMC,IACH,IAAIC,EAAMD,EAAGE,YAAY,oBAAoB,GACzCF,EAAGG,QAAQ,sBAGXrC,EAASO,MAAQ4B,EAAIG,QAKzBrC,EAAQM,OAAQ,CAAA,KA0BxB,IAAIqB,GACCC,gBACAC,YAAY,qBACZC,UACAC,QACAC,MAAMC,IACH,IAAIC,EAAMD,EAAGE,YAAY,iBAAiB,GACtCF,EAAGG,QAAQ,mBAGXvC,EAAMS,MAAQ4B,EAAIG,QAKtBrC,EAAQM,OAAQ,CAAA,suCA7HLgC,IACFzB,GAAAP,MAAQ,IAAIgC,QAEzBxB,GAAW,GAHrB,IAAyBwB,0qBAgCQ,KAHbzB,YAGDD,cAOb,IAAAe,GACCC,gBACAC,YAAY,sBACZC,QAAQ,CAACpB,QAASG,EAAaH,QAASE,aAAcC,EAAaD,eACnEmB,QACAC,MAAMC,IACMA,EAAAE,YAAY,kBAAkB,GACvCF,EAAGG,QAAQ,kBAEXH,EAAGM,YAAY,mBAIJnB,KAGfpB,EAAQM,OAAQ,CAAA,IAGfkC,OAAOC,IACAC,QAAAD,MAAM,yBAA0BA,GAGxCzC,EAAQM,OAAQ,CAAA,IA7BLc,gBAJE,IAACP,4tBAvBEA,YAER,IAAAc,GACCC,gBACAC,YAAY,0BACZC,QAAQ,CAACpB,QAASG,EAAaH,QAASE,aAAcC,EAAaD,aAAc+B,WAAY9B,EAAa8B,aAC1GZ,QACAC,MAAMC,IACMA,EAAAE,YAAY,sBAAsB,GAC3CF,EAAGG,QAAQ,sBASfpC,EAAQM,OAAQ,CAAA,eAlB5B,IAAoBO"}