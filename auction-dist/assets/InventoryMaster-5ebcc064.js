import{_ as e,d as l,ah as a,o,e as t,b as n,f as s,a as r,u,g as i,c,w as d,M as v,ai as m,H as p,E as h,F as y,J as f,l as g,s as I}from"./index-4336d1e5.js";import{s as C}from"./fileupload.esm-829aa14d.js";import{r as T,u as w}from"./xlsx-a6110627.js";const x={id:"inventoryMaster"},E={class:"text-xl font-bold flex gap-2 items-center"},b=n("form",null,null,-1),A=["href"],F=n("br",null,null,-1),k=["href"],_=n("br",null,null,-1),V=n("br",null,null,-1),M=e({__name:"InventoryMaster",setup(e){const M=l(),N=l(),D=l(!1);a((()=>{(new v).setActivity("o.[FetchInventoryCategories]").fetch().then((e=>{let l=e.getActivity("FetchInventoryCategories",!0);e.isValid("FetchInventoryCategories")?(console.log("fetchInventonryCategories result",l.result),M.value=l.result,console.log("Inventory Categories",M.value)):e.showErrorToast("FetchInventoryCategories")}))}));const j=l(),S=l(),L=l(),J=l(),R=l();function U(e){if(D.value=!0,R.value=e.files[0],console.log(e.files[0]),j.value=null,S.value=e.files?R.value:null,S.value){const e=new FileReader;e.onload=e=>{const l=e.target.result,a=T(l,{type:"binary"});console.log(a,"NewWorkBook");const o=a.SheetNames[0],t=a.Sheets[o],n=w.sheet_to_json(t,{header:1});console.log("WorksheetData in Array Format",n);const s=w.sheet_to_json(t,{header:0});j.value=s,L.value=n[0];var r=L.value.every((e=>W.value.includes(e)));console.log("columns.value",L.value),console.log("ColumnTempNames.value",W.value),r?(console.log("The arrays match."),J.value=L.value.map((e=>({field:e})))):(console.log("The arrays do not match."),alert("Invalid Template"),window.location.reload())},e.readAsBinaryString(S.value)}}function O(){const e=new FormData;e.append("myFile",R.value),e.append("categoryId",N.value),e.append("organizationId",1),e.append("entityId",2),m.post("http://localhost:8000/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e.data),alert(e.data),window.location.reload()})).catch((e=>{console.error("Error uploading file:",e)}))}l();const W=l();function B(){(new v).setActivity("o.[FetchInventoryTemplateColumns]").setData({inventoryCategoryId:N.value}).fetch().then((e=>{let l=e.getActivity("FetchInventoryTemplateColumns",!0);e.isValid("FetchInventoryTemplateColumns")?(console.log("FetchInventoryTemplateColumns",l.result),W.value=l.result[0].columnNames):e.showErrorToast("FetchInventoryTemplateColumns")}))}return(e,l)=>(o(),t("div",x,[n("h2",E,[n("i",{class:"isax isax-bold-arrow-left-2 cursor-pointer",onClick:l[0]||(l[0]=l=>e.$router.go(-1))}),s(" Inventory Master ")]),b,r(u(p),{modelValue:N.value,"onUpdate:modelValue":l[1]||(l[1]=e=>N.value=e),options:M.value,placeholder:"Select Category",class:"w-full md:w-14rem",optionLabel:"propertyCategoryName",optionValue:"propertyCategoryId",onChange:B},null,8,["modelValue","options"]),["2","3","4","7"].includes(N.value)?(o(),t("a",{key:0,href:"https://testcdncs.mkcl.org/22Jbn9juCuMfJ4fNA1Sp8AAVERE/InventoryTemplates/InventoryTemp.xlsx",download:""},[F,r(u(h),{label:"DOWNLOAD TEMPLATE HERE",link:""})],8,A)):i("",!0),["1","5","6","8"].includes(N.value)?(o(),t("a",{key:1,href:"https://testcdncs.mkcl.org/22Jbn9juCuMfJ4fNA1Sp8AAVERE/InventoryTemplates/InventoryTemp_Booth_VacantLand_Industrial.xlsx",download:""},[_,r(u(h),{label:"DOWNLOAD TEMPLATE HERE",link:""})],8,k)):i("",!0),N.value?(o(),c(u(C),{key:2,name:"excelFile",label:"Choose Excel File",accept:".xlsx,",modelValue:D.value,"onUpdate:modelValue":l[2]||(l[2]=e=>D.value=e),mode:"basic",auto:!0,"custom-upload":!0,onUploader:U},null,8,["modelValue"])):i("",!0),V,D.value?(o(),c(u(h),{key:3,label:"Upload",onClick:O},{default:d((()=>[s(" Upload ")])),_:1})):i("",!0),r(u(I),{value:j.value,tableStyle:"min-width: 50rem"},{default:d((()=>[(o(!0),t(y,null,f(J.value,(e=>(o(),c(u(g),{key:e.field,field:e.field,header:e.field},null,8,["field","header"])))),128))])),_:1},8,["value"])]))}},[["__file","D:/acution-live/auction-server/auction-live/src/views/InventoryMaster.vue"]]);export{M as default};
//# sourceMappingURL=InventoryMaster-5ebcc064.js.map
