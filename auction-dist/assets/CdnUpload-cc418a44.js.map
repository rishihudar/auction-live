{"version":3,"file":"CdnUpload-cc418a44.js","sources":["../../src/views/CdnUpload.vue"],"sourcesContent":["<template>\r\n  <div id=\"cdnUpload\">\r\n    <h2 class=\"text-xl font-bold flex gap-2 items-center\">\r\n      <i class=\"isax isax-bold-arrow-left-2 cursor-pointer\" @click=\"$router.go(-1)\"></i>\r\n      MarketPlace Applications\r\n    </h2>\r\n    <div class=\"box-login mx-auto p-8 max-w-2xl rounded-xl bg-white shadow\">\r\n        <h3>Upload File</h3>\r\n        <div class=\"field mt-5\">\r\n            <FormKit\r\n            type=\"form\"\r\n            id=\"cdn-upload-example\"\r\n            :form-class=\"submitted ? 'hide' : 'show'\"\r\n            submit-label=\"cdn Upload\"\r\n            @submit=\"cdnProfileUpload\"\r\n            :actions=\"false\"\r\n            >\r\n            <FormKit\r\n                type=\"text\"\r\n                name=\"inputFileName\"\r\n                label=\"Input File Name\"\r\n                v-model=\"inputFileName\"\r\n                placeholder=\"File name\"\r\n                help=\"Enter file name\"\r\n                validation=\"required\"\r\n            />\r\n            <FormKit\r\n                type=\"file\"\r\n                label=\"Your files\"\r\n                help=\"This input starts with files already “attached”.\"\r\n                multiple=\"true\"\r\n                :value=\"file_2\"\r\n                v-model=\"file\"\r\n                validation=\"required\"\r\n            /><FormKit type=\"submit\" label=\"Upload\" />\r\n            </FormKit>\r\n        </div>\r\n        <div v-if=\"uploadedFilePath\">\r\n            <h3>cdnServer</h3>\r\n            <div class=\"field\">\r\n            <p>{{ uploadedFilePath.cdnServer }}</p>\r\n            </div>\r\n            <h3>File Path</h3>\r\n            <p>{{ uploadedFilePath.filePath }}</p>\r\n        </div>\r\n        <h3>Download File</h3>\r\n        <div class=\"field mt-5\">\r\n            <FormKit\r\n            type=\"text\"\r\n            name=\"inputFileName\"\r\n            label=\"Uploaded File Name\"\r\n            v-model=\"fileURL\"\r\n            placeholder=\"File path\"\r\n            help=\"Enter File URI for Download\"\r\n            /><FormKit @click=\"downloadFile\" type=\"submit\" label=\"Download\" />\r\n        </div>\r\n        <h3>Delete File</h3>\r\n        <FormKit\r\n            type=\"form\"\r\n            id=\"cdn-delete-example\"\r\n            :form-class=\"submitted ? 'hide' : 'show'\"\r\n            submit-label=\"Delete\"\r\n            @submit=\"cdnFileDelete\"\r\n            :actions=\"false\"\r\n        >\r\n            <FormKit\r\n            type=\"text\"\r\n            name=\"deleteFilePath\"\r\n            label=\"Delete File Path\"\r\n            v-model=\"deleteFilePath\"\r\n            placeholder=\"File path\"\r\n            help=\"Enter file path\"\r\n            validation=\"required\"\r\n            />\r\n            <FormKit type=\"submit\" label=\"Delete\" />\r\n        </FormKit>\r\n        <div class=\"field\" v-if=\"uploadedFilePath.filePath\">\r\n            <h3>Show Image</h3>\r\n            <img\r\n            :src=\"'https://testcdncs.mkcl.org/' + uploadedFilePath.filePath\"\r\n            />\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport MQLCdn from \"@/plugins/mqlCdn.js\";\r\nimport { ref } from \"vue\";\r\nimport { createToaster } from \"@meforma/vue-toaster\";\r\nconst toaster = createToaster({ position: \"top-right\", duration: 3000 });\r\nlet inputFileName = ref(\"\");\r\nlet fileURL = ref(\"\");\r\nlet file = ref(\"\");\r\nlet uploadedFilePath = ref(\"\");\r\nlet file_2 = ref(\"\");\r\nlet submitted = ref(false);\r\nlet deleteFilePath = ref(\"\");\r\nfunction cdnProfileUpload() {\r\n  let formData = new FormData();\r\n  formData.append(\"file\", file._rawValue[0].file); // append your file as 'file' in formdata.\r\n  new MQLCdn()\r\n    .enablePageLoader(true)\r\n    // FIXED: change this to directory path\r\n    .setDirectoryPath(\"/demoFolder\") // (optional field) if you want to save  file to specific directory path\r\n    .setFormData(formData) // (required) sets file data\r\n    .setFileName(inputFileName.value) // (optional field) if you want to set name to file that is being uploaded\r\n    // FIXED: pass buckeyKey instead of name\r\n    .setBucketKey(\"22Jbn9juCuMfJ4fNA1Sp8AAVERE\") // (required) valid bucket key need to set in which file will be uploaded.\r\n    .setPurposeId(\"1TxY9TS4uzp8Ivyo0eKPpo1g2Og\") // (required) valid purposeId need to set in which file will be uploaded.\r\n    .setClientId(\"1TxY9TS4uzp8Ivyo0eKPpo1g2Og\") // (required) valid purposeId need to set in which file will be uploaded.\r\n    .uploadFile(\"uploadtBtn\")\r\n    .then((res) => {\r\n      // (required) this will upload file takes element id (optional param) which will be blocked while file upload..\r\n      if (res.isValid()) {\r\n        uploadedFilePath.value = res.uploadedFileURL(); // returns uploaded file url..\r\n        toaster.success(\"file uploaded.\");\r\n      } else {\r\n        res.showErrorToast();\r\n      }\r\n    });\r\n}\r\nfunction downloadFile() {\r\n  if (fileURL !== \"\") {\r\n    new MQLCdn()\r\n      .setCDNPath(fileURL.value) // (required) set a filepath whihch needs to be download.\r\n      .setBucketKey(\"22Jbn9juCuMfJ4fNA1Sp8AAVERE\")\r\n      .setPurposeId(\"1TxY9TS4uzp8Ivyo0eKPpo1g2Og\") // (required) valid purposeId need to set in which file will be uploaded.\r\n      .setClientId(\"1TxY9TS4uzp8Ivyo0eKPpo1g2Og\") // (required) if you are providing relative path\r\n      .enablePageLoader(true)\r\n      .downloadFile(\"downloadBtn\")\r\n      .then((res) => {\r\n        // (required) this will take elemnt id (optional) which will be blocked while file being downloaded.\r\n        if (!res.isValid()) {\r\n          res.showErrorToast();\r\n        }\r\n      });\r\n  }\r\n}\r\nfunction cdnFileDelete() {\r\n  if (deleteFilePath.value !== \"\") {\r\n    new MQLCdn()\r\n      .setBucketKey(\"22Jbn9juCuMfJ4fNA1Sp8AAVERE\") // (required) valid bucket key need to set in which file will be uploaded.\r\n      .setPurposeId(\"1TxY9TS4uzp8Ivyo0eKPpo1g2Og\") // (required) valid purposeId need to set in which file will be uploaded.\r\n      .setClientId(\"1TxY9TS4uzp8Ivyo0eKPpo1g2Og\") //\r\n      // .setDirectoryPath(\"/demoFolder\")\r\n      .setFileName(deleteFilePath.value)\r\n      .enablePageLoader(true)\r\n      .deleteFile(\"deleteButton\")\r\n      .then((res) => {\r\n        if (res.isValid()) {\r\n          toaster.success(\"file deleted.\");\r\n        } else {\r\n          res.showErrorToast();\r\n        }\r\n      });\r\n  }\r\n}\r\n</script>\r\n"],"names":["toaster","createToaster","position","duration","inputFileName","ref","fileURL","file","uploadedFilePath","file_2","submitted","deleteFilePath","cdnProfileUpload","formData","FormData","append","_rawValue","MQLCdn","enablePageLoader","setDirectoryPath","setFormData","setFileName","value","setBucketKey","setPurposeId","setClientId","uploadFile","then","res","isValid","uploadedFileURL","success","showErrorToast","downloadFile","setCDNPath","cdnFileDelete","deleteFile"],"mappings":"4oBA0FA,MAAMA,EAAUC,EAAc,CAAEC,SAAU,YAAaC,SAAU,MAC7D,IAAAC,EAAgBC,EAAI,IACpBC,EAAUD,EAAI,IACdE,EAAOF,EAAI,IACXG,EAAmBH,EAAI,IACvBI,EAASJ,EAAI,IACbK,EAAYL,GAAI,GAChBM,EAAiBN,EAAI,IACzB,SAASO,IACH,IAAAC,EAAW,IAAIC,SACnBD,EAASE,OAAO,OAAQR,EAAKS,UAAU,GAAGT,OAC1C,IAAIU,GACDC,kBAAiB,GAEjBC,iBAAiB,eACjBC,YAAYP,GACZQ,YAAYjB,EAAckB,OAE1BC,aAAa,+BACbC,aAAa,+BACbC,YAAY,+BACZC,WAAW,cACXC,MAAMC,IAEDA,EAAIC,WACWrB,EAAAc,MAAQM,EAAIE,kBAC7B9B,EAAQ+B,QAAQ,mBAEhBH,EAAII,gBACL,GAEP,CACA,SAASC,IACS,KAAZ3B,IACE,IAAAW,GACDiB,WAAW5B,EAAQgB,OACnBC,aAAa,+BACbC,aAAa,+BACbC,YAAY,+BACZP,kBAAiB,GACjBe,aAAa,eACbN,MAAMC,IAEAA,EAAIC,WACPD,EAAII,gBACL,GAGT,CACA,SAASG,IACsB,KAAzBxB,EAAeW,QACb,IAAAL,GACDM,aAAa,+BACbC,aAAa,+BACbC,YAAY,+BAEZJ,YAAYV,EAAeW,OAC3BJ,kBAAiB,GACjBkB,WAAW,gBACXT,MAAMC,IACDA,EAAIC,UACN7B,EAAQ+B,QAAQ,iBAEhBH,EAAII,gBACL,GAGT"}