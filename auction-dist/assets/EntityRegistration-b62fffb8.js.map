{"version":3,"file":"EntityRegistration-b62fffb8.js","sources":["../../src/views/EntityRegistration.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <template v-if=\"flag === 0\">\r\n            <div class=\"card\">\r\n                <DataTable responsiveLayout=\"scroll\" v-model:filters=\"filters\" :value=\"entities\" paginator :rows=\"10\"\r\n                    dataKey=\"id\" filterDisplay=\"row\" :loading=\"loading\"\r\n                    :globalFilterFields=\"['entityId', 'entityName', 'entityShortName', 'entityAddress', 'entityContactNumber']\">\r\n                    <template #header>\r\n                        <div class=\"flex justify-content-end\">\r\n                            <span class=\"p-input-icon-left\">\r\n                                <i class=\"pi pi-search\" />\r\n                                <InputText v-model=\"filters['global'].value\" placeholder=\"Keyword Search\" />\r\n                            </span>\r\n                            <div class=\"ml-auto\">\r\n                                <span class=\"p-buttonset\">\r\n                                    <Button label=\"ADD\" @click=\"changeFlag(1)\" icon=\"pi pi-trash\" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </template>\r\n                    <template #empty>No data found.</template>\r\n                    <Column field=\"entityId\" header=\"Id\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.entityId }}\r\n                        </template>\r\n\r\n                    </Column>\r\n\r\n                    <Column field=\"entityName\" header=\"Entity Name\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.entityName }}\r\n                        </template>\r\n\r\n                    </Column>\r\n                    <Column field=\"entityShortName\" header=\"Entity Short Name\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.entityShortName }}\r\n                        </template>\r\n\r\n                    </Column>\r\n                    <Column field=\"entityAddress\" header=\"Entity Address\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.entityAddress }}\r\n                        </template>\r\n\r\n                    </Column>\r\n\r\n                    <Column field=\" entityContactNumber\" header=\"Entity Contact Number\" style=\"min-width: 12rem\">\r\n                        <template #body=\"{ data }\">\r\n                            {{ data.entityContactNumber }}\r\n                        </template>\r\n                    </Column>\r\n                    <Column header=\"Actions\" style=\"min-width:12rem\">\r\n\r\n                        <template #body=\"{ data }\">\r\n                            <span class=\"p-buttonset\">\r\n                                <Button label=\"Edit\" @click=\"editEntity(data), changeFlag(2)\" icon=\"pi pi-trash\" />\r\n                            </span>\r\n                            <!-- <span class=\"p-buttonset\">\r\n                                <Button label=\"Delete\" @click=\"deleteEntity(data),reloadPage()\" icon=\"pi pi-trash\" />\r\n                            </span> -->\r\n                            <ConfirmDialog></ConfirmDialog>\r\n                            <div class=\"w-1/2\">\r\n                                <div class=\"fm-group\">\r\n                                    <Button @click=\"confirmDelete(data)\" type=\"submit\"\r\n                                        class=\"p-button p-button-primary\">Delete</Button>\r\n                                </div>\r\n                            </div>\r\n                        </template>\r\n                    </Column>\r\n                </DataTable>\r\n            </div>\r\n        </template>\r\n        <template v-else-if=\"flag === 1\">\r\n\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n\r\n                        <!-- Bind the selected country to entityData.fklENtityTypeId -->\r\n                        <label for=\"entityName\">Entity Type</label>\r\n                        <Dropdown v-model=\"entityData.entityTypeId\" optionValue=\"entityTypeId\" :options=\"entitytype\"\r\n                            optionLabel=\"entityTypeName\" placeholder=\"Select a Entity Type\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"entityName\">Entity Name</label>\r\n                        <InputText id=\"entityName\" v-model=\"entityData.entityName\" />\r\n                        <small id=\"username-help\">Enter Entity Name E.g UttarPradesh</small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"entityShortName\">Entity Short Name</label>\r\n                        <InputText id=\"entityShortName\" v-model=\"entityData.entityShortName\" />\r\n                        <small id=\"username-help\">Enter Entity Short Name E.g MCF</small>\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"entityAddress\">Entity Address</label>\r\n                        <InputText id=\"entityAddress\" v-model=\"entityData.entityAddress\" />\r\n                        <small id=\"username-help\">Enter Entity Address E.g MCF</small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/4\">\r\n                    <div class=\"fm-group\">\r\n                <label for=\"entityContactNumber\">Entity Contact Number</label>\r\n                <InputText id=\"entityContactNumber\" v-model=\"entityData.entityContactNumber\" />\r\n                <small id=\"username-help\">Enter Entity Contact Number E.g 6398302275</small>\r\n            </div>\r\n        </div>\r\n        <div class=\"w-1/4\">\r\n            <div class=\"fm-group\">\r\n            <Toast />\r\n            <ConfirmDialog></ConfirmDialog>\r\n            <div class=\"card flex flex-wrap gap-2 justify-content-center\">\r\n                <Button @click=\"confirmADD(entityData)\" icon=\"pi pi-check\" label=\"Submit\"></Button>\r\n                <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-times\" label=\"Cancel\" severity=\"danger\"></Button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n            <!-- <Button @click=\"insertEntity(entityData), changeFlag(0), reloadPage()\" icon=\"pi pi-check\"\r\n                    label=\"Submit\"></Button> -->\r\n            <!-- <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-check\" label=\"Cancel\"></Button> -->\r\n\r\n        </template>\r\n\r\n        <template v-else-if=\"flag === 2\">\r\n            <div class=\"fm-row\">\r\n                <div class=\"w-1/2\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"entityName\">Entity Type</label>\r\n                        <!-- Bind the selected entitytype to entityData.entityTypeId -->\r\n                        <Dropdown v-model=\"entityData.entityTypeId\" optionValue=\"entityTypeId\" :options=\"entitytype\"\r\n                            optionLabel=\"entityTypeName\" placeholder=\"Select a Entity Type\" class=\"w-full md:w-14rem\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-1/2\">\r\n                    <div class=\"fm-group\">\r\n                        <label for=\"entityName\">Entity Name</label>\r\n                        <InputText id=\"entityName\" v-model=\"entityData.entityName\" />\r\n                        <small id=\"username-help\">Enter Entity Name E.g UttarPradesh</small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-1/2\">\r\n                <label for=\"entityShortName\">Entity Short Name</label>\r\n                <InputText id=\"entityShortName\" v-model=\"entityData.entityShortName\" />\r\n                <small id=\"username-help\">Enter Entity Short Name E.g MCF</small>\r\n            </div>\r\n\r\n            <div class=\"w-1/2\">\r\n                <label for=\"entityAddress\">Entity Address</label>\r\n                <InputText id=\"entityAddress\" v-model=\"entityData.entityAddress\" />\r\n                <small id=\"username-help\">Enter Entity Address E.g MCF</small>\r\n            </div>\r\n\r\n            <div class=\"w-1/2\">\r\n                <label for=\"entityContactNumber\">Entity Contact Number</label>\r\n                <InputText id=\"entityContactNumber\" v-model=\"entityData.entityContactNumber\" />\r\n                <small id=\"username-help\">Enter Entity Contact Number E.g 6398302275</small>\r\n            </div>\r\n\r\n\r\n\r\n            <Toast />\r\n            <ConfirmDialog></ConfirmDialog>\r\n            <div class=\"w-1/2\">\r\n                <div class=\"fm-group\">\r\n                    <Button @click=\"confirmEdit(entityData)\" type=\"submit\" class=\"p-button p-button-primary\">Submit</Button>\r\n                    <Button @click=\"changeFlag(0), reloadPage()\" icon=\"pi pi-times\" label=\"Cancel\"\r\n                        severity=\"danger\"></Button>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </template>\r\n\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { FilterMatchMode } from 'primevue/api';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\nimport InputText from 'primevue/inputtext';\r\nimport MQL from '@/plugins/mql.js';\r\nimport Button from 'primevue/button';\r\nimport Dropdown from 'primevue/dropdown';\r\nimport { useConfirm } from \"primevue/useconfirm\";\r\nimport { useToast } from \"primevue/usetoast\";\r\nimport ConfirmDialog from 'primevue/confirmdialog';\r\nconst confirm = useConfirm();\r\nconst toast = useToast();\r\nconst entities = ref([]);\r\nconst loading = ref(true);\r\nvar flag = ref(0);\r\n\r\nconst entityData = ref({\r\n    entityName: '',\r\n    entityShortName: '',\r\n    entityAddress: '',\r\n    entityContactNumber: '',\r\n    entityTypeId: '',\r\n    organizationId: ''\r\n});\r\n\r\nconst organizationId = 1\r\nconst entitytype = ref([]);\r\n\r\nconst filters = ref({\r\n    global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n    entityName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n    entityShortName: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n    entityAddress: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n    entitycontactNumber: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n});\r\n\r\nfunction changeFlag(newValue) {\r\n    flag.value = newValue\r\n    ref(flag)\r\n    console.log(\"getting from change function\", flag)\r\n}\r\n\r\nfunction FetchEntities() {\r\n    new MQL()\r\n        .setActivity('o.[FetchEntityDetails]')\r\n        .setData()\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('FetchEntityDetails', true);\r\n            if (rs.isValid('FetchEntityDetails')) {\r\n                console.log(res.result);\r\n                entities.value = res.result;\r\n            } else {\r\n                rs.showErrorToast('FetchEntityDetails');\r\n            }\r\n            loading.value = false; // Move loading to here\r\n        });\r\n}\r\nfunction FetchEntityTypeByOrganization(organizationId) {\r\n    console.log(\"OrganizationData\", organizationId)\r\n    new MQL()\r\n        .setActivity('o.[FetchEntityTypeByOrganizationId]')\r\n        .setData({ organizationId: organizationId })\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('FetchEntityTypeByOrganizationId', true);\r\n            if (rs.isValid('FetchEntityTypeByOrganizationId')) {\r\n                console.log(res.result);\r\n                entitytype.value = res.result;\r\n\r\n            } else {\r\n                rs.showErrorToast('FetchEntityTypeByOrganizationId');\r\n            }\r\n            loading.value = false; // Move loading to here\r\n        });\r\n}\r\nfunction insertEntity(entityData) {\r\n    new MQL()\r\n        .setActivity('o.[InsertEntity]')\r\n        .setData(entityData)\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('InsertEntity', true);\r\n            if (rs.isValid('InsertEntity')) {\r\n                console.log(res.result);\r\n                console.log(\"entityData from Insert\", entityData);\r\n\r\n            } else {\r\n                rs.showErrorToast('InsertState');\r\n            }\r\n            loading.value = false;\r\n        });\r\n}\r\nfunction updateEntity(entityData) {\r\n    new MQL()\r\n        .setActivity('o.[UpdateEntityById]')\r\n        .setData(entityData)\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('UpdateEntityById', true);\r\n            if (rs.isValid('UpdateEntityById')) {\r\n                console.log(res.result);\r\n                console.log(\"entityData update\", entityData);\r\n                // Optionally, you can reload the page or update the state list after insertion\r\n\r\n            } else {\r\n                rs.showErrorToast('UpdateEntityById');\r\n            }\r\n            loading.value = false;\r\n        });\r\n}\r\nfunction reloadPage() {\r\n    window.location.reload();\r\n    console.log(\"we are reloading page\")\r\n}\r\n\r\n\r\nfunction editEntity(data) {\r\n    console.log(\"Before edit: \", data);\r\n\r\n    // Set entityData to the values of the selected state\r\n    entityData.value = {\r\n        ...data,\r\n        entityTypeId: parseInt(data.entityTypeId)\r\n    };\r\n\r\n    console.log(\"After edit: \", entityData);\r\n\r\n    // Update the flag to indicate edit mode\r\n    changeFlag(2);\r\n}\r\n\r\n\r\nconst confirmEdit = (entityData) => {\r\n    confirm.require({\r\n        message: 'Are you sure you want to edit Entity?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n            updateEntity(entityData), changeFlag(0), reloadPage()\r\n            toast.add({ severity: 'info', summary: 'Confirmed', detail: 'You have accepted', life: 3000 });\r\n        },\r\n        reject: () => {\r\n            toast.add({ severity: 'error', summary: 'Rejected', detail: 'You have rejected', life: 3000 });\r\n        }\r\n    });\r\n};\r\n\r\nconst confirmADD = (entityData) => {\r\n    confirm.require({\r\n        message: 'Are you sure you want to add Entity?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n            insertEntity(entityData), changeFlag(0), reloadPage()\r\n            toast.add({ severity: 'info', summary: 'Confirmed', detail: 'You have accepted', life: 3000 });\r\n        },\r\n        reject: () => {\r\n            toast.add({ severity: 'error', summary: 'Rejected', detail: 'You have rejected', life: 3000 });\r\n        }\r\n    });\r\n};\r\n\r\nconst confirmDelete = (data) => {\r\n    confirm.require({\r\n        message: 'Are you sure you want to delete Entity?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n            deleteEntity(data), changeFlag(0), reloadPage()\r\n            toast.add({ severity: 'info', summary: 'Confirmed', detail: 'You have accepted', life: 3000 });\r\n        },\r\n        reject: () => {\r\n            toast.add({ severity: 'error', summary: 'Rejected', detail: 'You have rejected', life: 3000 });\r\n        }\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nfunction deleteEntity(data) {\r\n    new MQL()\r\n        .setActivity('o.[DeleteEntityById]')\r\n        .setData(data)\r\n        .fetch()\r\n        .then((rs) => {\r\n            let res = rs.getActivity('DeleteEntityById', true);\r\n            if (rs.isValid('DeleteEntityById')) {\r\n                console.log(res.result);\r\n            } else {\r\n                rs.showErrorToast('DeleteEntity');\r\n            }\r\n            loading.value = false;\r\n        });\r\n}\r\n\r\nonMounted(() => {\r\n    FetchEntities();\r\n    FetchEntityTypeByOrganization(organizationId);\r\n\r\n});\r\n\r\n\r\n\r\n</script>\r\n<style scoped>\r\n.flex-column {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.gap-2 {\r\n    gap: 2rem;\r\n    /* Adjust the gap as needed */\r\n}\r\n\r\n.form-row {\r\n    margin-bottom: 1rem;\r\n    /* Adjust the margin as needed */\r\n}</style>"],"names":["confirm","useConfirm","toast","useToast","entities","ref","loading","flag","entityData","entityName","entityShortName","entityAddress","entityContactNumber","entityTypeId","organizationId","entitytype","filters","global","value","matchMode","FilterMatchMode","CONTAINS","STARTS_WITH","entitycontactNumber","changeFlag","newValue","console","log","reloadPage","window","location","reload","confirmEdit","require","message","header","icon","accept","MQL","setActivity","setData","fetch","then","rs","res","getActivity","isValid","result","showErrorToast","updateEntity","add","severity","summary","detail","life","reject","confirmADD","insertEntity","confirmDelete","data","deleteEntity","onMounted","parseInt"],"mappings":"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"}