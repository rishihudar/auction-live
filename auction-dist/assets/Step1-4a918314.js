import{_ as e,aj as t,ap as a,aq as o,d as i,R as l,C as s,o as n,e as c,b as u,u as d,t as r,a as p,g as v,M as h,H as A,E as y,A as I}from"./index-4336d1e5.js";import"./dividerstyle.esm-95cf4cf0.js";import{u as m,c as T,r as f}from"./index-d2775270.js";import{f as M,i as g}from"./helpers-8a92585b.js";const w={class:"wizard-content"},D={class:"wc-item"},S={class:"wc-header"},b={key:0,class:"wc-title"},F={key:1,class:"wc-title"},P={class:"form-grid"},V={key:0,class:"col-span-full md:col-span-6"},N={class:"fm-group required"},U=u("label",{class:"fm-label",for:"step1"}," Auction Type ",-1),E={class:"fm-inner"},$={key:0,class:"fm-error"},k={key:1,class:"col-span-full md:col-span-6"},q={class:"fm-group required"},j=u("label",{class:"fm-label",for:"step2"}," Auction Method ",-1),x={class:"fm-inner"},C={key:0,class:"fm-error"},_={class:"wc-action"},L=e({__name:"Step1",props:{config:{type:Object,default:null},auctionId:{type:Number,default:null}},emits:{click:null,submit:({lastInsertedId:e})=>!!e||(console.warn("Invalid submit event payload!"),!1),nextTab:null},setup(e,{emit:L}){const z=I({position:"top-right",duration:3e3}),O=t(),{organizationId:R,entityId:B,loginId:H}=a(O),G=o(),{getLastInsertedAuctionId:J}=a(G),K=i({auctionMethodName:"",auctionMethodId:0}),{config:Q,auctionId:W}=e,X=i([]);i([]);const Y=i(),Z=i(),ee=i([]),te=i({auctionType:"",auctionTypeId:0}),ae=i(""),oe=L;const ie=async()=>{const e=await se.value.$validate();e?null==W&&e?(console.log("OrganizationId, entityId, loginId",R.value,B.value,H.value),(new h).useManagementServer().setActivity("o.[InsertAuctionTypeAndAuctionMethod]").setData({auctionTypeId:te.value.auctionTypeId,auctionMethodId:K.value.auctionMethodId,statusId:Z.value,organizationId:R.value,entityId:B.value,createdByUserId:H.value}).fetch().then((e=>{let t=e.getActivity("InsertAuctionTypeAndAuctionMethod",!0);e.isValid("InsertAuctionTypeAndAuctionMethod")?(console.log("LastInsertedId from response",t.result),ae.value=t.result.auctionId,console.log("LastInsertedId from lastInsertedId variable",ae.value),oe("submit",ae.value),oe("nextTab")):e.showErrorToast("InsertAuctionTypeAndAuctionMethod")}))):(new h).useManagementServer().setActivity("o.[UpdateStep1Details]").setData({auctionTypeId:te.value.auctionTypeId,auctionMethodId:K.value.auctionMethodId,statusId:Z.value,auctionId:W,modifiedByUserId:H.value}).fetch().then((e=>{let t=e.getActivity("UpdateStep1Details",!0);e.isValid("UpdateStep1Details")?(oe("nextTab"),console.log("UpdateStep1Details",t.result)):e.showErrorToast("UpdateStep1Details")})):z.error("Form Invalid")};const le=l((()=>({auctionTypeData:{auctionTypeId:{required:T.withMessage("Please Select Auction Type ID",f)},auctionType:{required:T.withMessage("Please Select Auction Type",f)}},auctionMethodData:{auctionMethodId:{required:T.withMessage("Please Select Auction Method ID",f)},auctionMethodName:{required:T.withMessage("Please Select Auction Method",f)}}}))),se=m(le,{auctionMethodData:K,auctionTypeData:te});return s((()=>{(new h).useCoreServer().setActivity("o.[FetchAllAuctionTypes]").setData().fetch().then((e=>{let t=e.getActivity("FetchAllAuctionTypes",!0);e.isValid("FetchAllAuctionTypes")?(console.log("Auction Type Data",t.result),ee.value=t.result):e.showErrorToast("ErrorFetchAllAuctionTypes")})),(new h).useCoreServer().setActivity("o.[FetchAllAuctionMethods]").setData().fetch().then((e=>{let t=e.getActivity("FetchAllAuctionMethods",!0);e.isValid("FetchAllAuctionMethods")?(console.log("Auction Method Data",t.result),X.value=t.result):e.showErrorToast("ErrorFetchAllAuctionMethods")})),(new h).useManagementServer().setActivity("o.[FetchAllStepsAuctionPreview]").setData({auctionId:W}).fetch().then((e=>{let t=e.getActivity("FetchAllStepsAuctionPreview",!0);e.isValid("FetchAllStepsAuctionPreview")?(console.log("FetchAllStepsAuctionPreview",t.result),K.value.auctionMethodName=t.result.fetchStep1AuctionPreview.auctionMethodName,K.value.auctionMethodId=`${t.result.fetchStep1AuctionPreview.auctionMethodId}`,te.value.auctionType=t.result.fetchStep1AuctionPreview.auctionType,te.value.auctionTypeId=`${t.result.fetchStep1AuctionPreview.auctionTypeId}`):e.showErrorToast("FetchAllStepsAuctionPreview")})),async function(){const e=await M("AUCTION_DRAFTED");null==e.error?(Z.value=e.result.statusId,Y.value=e.result.displayName):z.error("Oops! Please Contact")}()})),(t,a)=>{var o,i,l,s;return n(),c("div",w,[u("div",D,[u("div",S,[null==d(J)?(n(),c("div",b,"Step 1 Details")):(n(),c("div",F,"Auction Id: "+r(d(J)),1))]),u("div",P,[d(g)(null==(o=e.config)?void 0:o.auctionTypeDataVisible,!0)?(n(),c("div",V,[u("div",N,[U,u("div",E,[p(d(A),{disabled:null==(i=e.config)?void 0:i.auctionTypeDataReadonly,modelValue:te.value,"onUpdate:modelValue":a[0]||(a[0]=e=>te.value=e),variant:"filled",options:ee.value,optionLabel:"auctionType",placeholder:"Select Auction Type"},null,8,["disabled","modelValue","options"])]),d(se).auctionTypeData.auctionType.$error?(n(),c("div",$,r(d(se).auctionTypeData.auctionType.$errors[0].$message),1)):v("",!0)])])):v("",!0),d(g)(null==(l=e.config)?void 0:l.auctionMethodDataVisible,!0)?(n(),c("div",k,[u("div",q,[j,u("div",x,[p(d(A),{disabled:null==(s=e.config)?void 0:s.auctionMethodDataReadonly,modelValue:K.value,"onUpdate:modelValue":a[1]||(a[1]=e=>K.value=e),variant:"filled",options:X.value,optionLabel:"auctionMethodName",placeholder:"Select Auction Method"},null,8,["disabled","modelValue","options"])]),d(se).auctionMethodData.auctionMethodName.$error?(n(),c("div",C,r(d(se).auctionMethodData.auctionMethodName.$errors[0].$message),1)):v("",!0)])])):v("",!0)])]),u("div",_,[p(d(y),{class:"btn-submit",label:"Save",onClick:ie})])])}}},[["__file","D:/acution-live/auction-server/auction-live/src/views/admin/AuctionPreparation/Step1.vue"]]);export{L as default};
//# sourceMappingURL=Step1-4a918314.js.map
